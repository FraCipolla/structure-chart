var Ja=Object.defineProperty;var oi=e=>{throw TypeError(e)};var Qa=(e,t,n)=>t in e?Ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ae=(e,t,n)=>Qa(e,typeof t!="symbol"?t+"":t,n),Xr=(e,t,n)=>t.has(e)||oi("Cannot "+n);var A=(e,t,n)=>(Xr(e,t,"read from private field"),n?n.call(e):t.get(e)),q=(e,t,n)=>t.has(e)?oi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xn=(e,t,n,r)=>(Xr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ii=(e,t,n)=>(Xr(e,t,"access private method"),n);import{b as ja,f as de,a as K,d as Se,t as $a,c as me}from"../chunks/CYt8Ta4V.js";import{i as el}from"../chunks/CQ-2sNha.js";import{ab as Po,aq as cs,ar as tl,h as pe,G as Xt,A as Ao,P as Pr,z as us,F as lo,b as Ar,m as l,X as nl,H as rl,J as ol,K as si,L as Nt,c as xt,ag as il,M as No,a as Fn,N as ds,as as fs,ak as hs,a0 as sl,at as co,au as Yr,Q as al,C as uo,av as zo,aw as ll,ax as To,ay as ai,az as cl,aj as ul,aA as dl,d as Mn,aB as fl,ae as hl,E as gl,aC as vl,O as Bn,i as nt,o as ml,aD as yl,aE as wl,aF as xl,p as bl,aG as pl,aH as _l,aI as kl,aJ as Sl,aK as El,aL as Cl,$ as X,aM as Ml,ao as Pl,s as oe,aN as Tt,j as gs,v as ie,w as te,x as j,ap as x,n as Me,aO as Rt,f as ce,y as ee,t as we,aP as tn,aQ as vs,u as St,an as he,_ as Pt,aR as Gt,aS as ze,aT as Ke,aU as Al}from"../chunks/9cGHSDv7.js";import{a as Wn,o as Nl}from"../chunks/Cg7nkNT-.js";import{s as xe}from"../chunks/BwkxMsNK.js";import{i as zl,l as ms,a as Tl,c as Il,d as nn,b as Ol,n as Dl,e as Rl,f as Hl,s as dt,o as fo,g as Bt}from"../chunks/BleGU-tP.js";import{p as B,r as Ee,i as ye,b as Ht,c as Io,s as Ce}from"../chunks/BYbot5fb.js";const Ll=[];function ys(e,t=!1){return or(e,new Map,"",Ll)}function or(e,t,n,r,o=null){if(typeof e=="object"&&e!==null){var i=t.get(e);if(i!==void 0)return i;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Po(e)){var s=Array(e.length);t.set(e,s),o!==null&&t.set(o,s);for(var a=0;a<e.length;a+=1){var c=e[a];a in e&&(s[a]=or(c,t,n,r))}return s}if(cs(e)===tl){s={},t.set(e,s),o!==null&&t.set(o,s);for(var d in e)s[d]=or(e[d],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return or(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Vl(e,t){pe&&Xt(Ao(e)),Pr(()=>{var n=t();for(var r in n){var o=n[r];o?e.style.setProperty(r,o):e.style.removeProperty(r)}})}function ws(e,t){return t}function Fl(e,t,n,r){for(var o=[],i=t.length,s=0;s<i;s++)cl(t[s].e,o,!0);var a=i>0&&o.length===0&&n!==null;if(a){var c=n.parentNode;ul(c),c.append(n),r.clear(),wt(e,t[0].prev,t[i-1].next)}dl(o,()=>{for(var d=0;d<i;d++){var u=t[d];a||(r.delete(u.k),wt(e,u.prev,u.next)),Mn(u.e,!a)}})}function Et(e,t,n,r,o,i=null){var s=e,a={flags:t,items:new Map,first:null},c=(t&fs)!==0;if(c){var d=e;s=pe?Xt(Ao(d)):d.appendChild(us())}pe&&lo();var u=null,h=!1,f=nl(()=>{var g=n();return Po(g)?g:g==null?[]:hs(g)});Ar(()=>{var g=l(f),m=g.length;if(h&&m===0)return;h=m===0;let _=!1;if(pe){var p=rl(s)===ol;p!==(m===0)&&(s=si(),Xt(s),Nt(!1),_=!0)}if(pe){for(var w=null,O,b=0;b<m;b++){if(xt.nodeType===8&&xt.data===il){s=xt,_=!0,Nt(!1);break}var y=g[b],N=r(y,b);O=xs(xt,a,w,null,y,N,b,o,t,n),a.items.set(N,O),w=O}m>0&&Xt(si())}pe||Bl(g,a,s,o,t,r,n),i!==null&&(m===0?u?No(u):u=Fn(()=>i(s)):u!==null&&ds(u,()=>{u=null})),_&&Nt(!0),l(f)}),pe&&(s=xt)}function Bl(e,t,n,r,o,i,s){var v,M,k,I;var a=(o&ll)!==0,c=(o&(To|zo))!==0,d=e.length,u=t.items,h=t.first,f=h,g,m=null,_,p=[],w=[],O,b,y,N;if(a)for(N=0;N<d;N+=1)O=e[N],b=i(O,N),y=u.get(b),y!==void 0&&((v=y.a)==null||v.measure(),(_??(_=new Set)).add(y));for(N=0;N<d;N+=1){if(O=e[N],b=i(O,N),y=u.get(b),y===void 0){var T=f?f.e.nodes_start:n;m=xs(T,t,m,m===null?t.first:m.next,O,b,N,r,o,s),u.set(b,m),p=[],w=[],f=m.next;continue}if(c&&Wl(y,O,N,o),(y.e.f&Yr)!==0&&(No(y.e),a&&((M=y.a)==null||M.unfix(),(_??(_=new Set)).delete(y))),y!==f){if(g!==void 0&&g.has(y)){if(p.length<w.length){var E=w[0],D;m=E.prev;var V=p[0],R=p[p.length-1];for(D=0;D<p.length;D+=1)li(p[D],E,n);for(D=0;D<w.length;D+=1)g.delete(w[D]);wt(t,V.prev,R.next),wt(t,m,V),wt(t,R,E),f=E,m=R,N-=1,p=[],w=[]}else g.delete(y),li(y,f,n),wt(t,y.prev,y.next),wt(t,y,m===null?t.first:m.next),wt(t,m,y),m=y;continue}for(p=[],w=[];f!==null&&f.k!==b;)(f.e.f&Yr)===0&&(g??(g=new Set)).add(f),w.push(f),f=f.next;if(f===null)continue;y=f}p.push(y),m=y,f=y.next}if(f!==null||g!==void 0){for(var W=g===void 0?[]:hs(g);f!==null;)(f.e.f&Yr)===0&&W.push(f),f=f.next;var S=W.length;if(S>0){var C=(o&fs)!==0&&d===0?n:null;if(a){for(N=0;N<S;N+=1)(k=W[N].a)==null||k.measure();for(N=0;N<S;N+=1)(I=W[N].a)==null||I.fix()}Fl(t,W,C,u)}}a&&al(()=>{var H;if(_!==void 0)for(y of _)(H=y.a)==null||H.apply()}),uo.first=t.first&&t.first.e,uo.last=m&&m.e}function Wl(e,t,n,r){(r&To)!==0&&ai(e.v,t),(r&zo)!==0?ai(e.i,n):e.i=n}function xs(e,t,n,r,o,i,s,a,c,d){var u=(c&To)!==0,h=(c&fl)===0,f=u?h?sl(o,!1,!1):co(o):o,g=(c&zo)===0?s:co(s),m={i:g,v:f,k:i,a:null,e:null,prev:n,next:r};try{return m.e=Fn(()=>a(e,f,g,d),pe),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?t.first=m:(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function li(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==r;){var s=hl(i);o.before(i),i=s}}function wt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Xl(e,t,n,r,o,i){let s=pe;pe&&lo();var a,c,d=null;pe&&xt.nodeType===1&&(d=xt,lo());var u=pe?xt:e,h;Ar(()=>{const f=t()||null;var g=vl;f!==a&&(h&&(f===null?ds(h,()=>{h=null,c=null}):f===c?No(h):Mn(h)),f&&f!==c&&(h=Fn(()=>{if(d=pe?d:document.createElementNS(g,f),ja(d,d),r){pe&&zl(f)&&d.append(document.createComment(""));var m=pe?Ao(d):d.appendChild(us());pe&&(m===null?Nt(!1):Xt(m)),r(d,m)}uo.nodes_end=d,u.before(d)})),a=f,a&&(c=a))},gl),s&&(Nt(!0),Xt(u))}function Te(e,t,n){Bn(()=>{var r=nt(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var o=!1,i={};Pr(()=>{var s=n();ml(s),o&&yl(i,s)&&(i=s,r.update(s))}),o=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Yl(e,t){var n=void 0,r;Ar(()=>{n!==(n=t())&&(r&&(Mn(r),r=null),n&&(r=Fn(()=>{Bn(()=>n(e))})))})}function bs(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=bs(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Kl(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=bs(e))&&(r&&(r+=" "),r+=t);return r}function Ct(e){return typeof e=="object"?Kl(e):e??""}const ci=[...` 	
\r\fÂ \v\uFEFF`];function ql(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,s=0;(s=r.indexOf(o,s))>=0;){var a=s+i;(s===0||ci.includes(r[s-1]))&&(a===r.length||ci.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function ui(e,t=!1){var n=t?" !important;":";",r="";for(var o in e){var i=e[o];i!=null&&i!==""&&(r+=" "+o+": "+i+n)}return r}function Kr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Zl(e,t){if(t){var n="",r,o;if(Array.isArray(t)?(r=t[0],o=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,s=0,a=!1,c=[];r&&c.push(...Object.keys(r).map(Kr)),o&&c.push(...Object.keys(o).map(Kr));var d=0,u=-1;const _=e.length;for(var h=0;h<_;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):i?i===f&&(i=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?i=f:f==="("?s++:f===")"&&s--,!a&&i===!1&&s===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===_-1){if(u!==-1){var g=Kr(e.substring(d,u).trim());if(!c.includes(g)){f!==";"&&h++;var m=e.substring(d,h).trim();n+=" "+m+";"}}d=h+1,u=-1}}}}return r&&(n+=ui(r)),o&&(n+=ui(o,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function vt(e,t,n,r,o,i){var s=e.__className;if(pe||s!==n||s===void 0){var a=ql(n,r,i);(!pe||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}else if(i&&o!==i)for(var c in i){var d=!!i[c];(o==null||d!==!!o[c])&&e.classList.toggle(c,d)}return i}function qr(e,t={},n,r){for(var o in n){var i=n[o];t[o]!==i&&(n[o]==null?e.style.removeProperty(o):e.style.setProperty(o,i,r))}}function Ie(e,t,n,r){var o=e.__style;if(pe||o!==t){var i=Zl(t,r);(!pe||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}else r&&(Array.isArray(r)?(qr(e,n==null?void 0:n[0],r[0]),qr(e,n==null?void 0:n[1],r[1],"important")):qr(e,n,r));return r}function ur(e,t,n){if(e.multiple){if(t==null)return;if(!Po(t))return wl();for(var r of e.options)r.selected=t.includes(Sn(r));return}for(r of e.options){var o=Sn(r);if(xl(o,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ps(e,t){let n=!0;Bn(()=>{t&&ur(e,nt(t),n),n=!1;var r=new MutationObserver(()=>{var o=e.__value;ur(e,o)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Gl(e,t,n=t){var r=!0;ms(e,"change",o=>{var i=o?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(i),Sn);else{var a=e.querySelector(i)??e.querySelector("option:not([disabled])");s=a&&Sn(a)}n(s)}),Bn(()=>{var o=t();if(ur(e,o,r),r&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=Sn(i),n(o))}e.__value=o,r=!1}),ps(e)}function Sn(e){return"__value"in e?e.__value:e.value}const bt=Symbol("class"),Je=Symbol("style"),_s=Symbol("is custom element"),ks=Symbol("is html");function ho(e){if(pe){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;re(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;re(e,"checked",null),e.checked=o}}};e.__on_r=n,El(n),Hl()}}function Ul(e,t){var n=Oo(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Jl(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function re(e,t,n,r){var o=Oo(e);pe&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="loading"&&(e[kl]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ss(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ql(e,t,n,r,o=!1){var i=Oo(e),s=i[_s],a=!i[ks];let c=pe&&s;c&&Nt(!1);var d=t||{},u=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=Ct(n.class):(r||n[bt])&&(n.class=null),n[Je]&&(n.style??(n.style=null));var f=Ss(e);for(const b in n){let y=n[b];if(u&&b==="value"&&y==null){e.value=e.__value="",d[b]=y;continue}if(b==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";vt(e,g,y,r,t==null?void 0:t[bt],n[bt]),d[b]=y,d[bt]=n[bt];continue}if(b==="style"){Ie(e,y,t==null?void 0:t[Je],n[Je]),d[b]=y,d[Je]=n[Je];continue}var m=d[b];if(y!==m){d[b]=y;var _=b[0]+b[1];if(_!=="$$")if(_==="on"){const N={},T="$$"+b;let E=b.slice(2);var p=Rl(E);if(Tl(E)&&(E=E.slice(0,-7),N.capture=!0),!p&&m){if(y!=null)continue;e.removeEventListener(E,d[T],N),d[T]=null}if(y!=null)if(p)e[`__${E}`]=y,nn([E]);else{let D=function(V){d[b].call(this,V)};d[T]=Il(E,e,D,N)}else p&&(e[`__${E}`]=void 0)}else if(b==="style")re(e,b,y);else if(b==="autofocus")Ol(e,!!y);else if(!s&&(b==="__value"||b==="value"&&y!=null))e.value=e.__value=y;else if(b==="selected"&&u)Jl(e,y);else{var w=b;a||(w=Dl(w));var O=w==="defaultValue"||w==="defaultChecked";if(y==null&&!s&&!O)if(i[b]=null,w==="value"||w==="checked"){let N=e;const T=t===void 0;if(w==="value"){let E=N.defaultValue;N.removeAttribute(w),N.defaultValue=E,N.value=N.__value=T?E:null}else{let E=N.defaultChecked;N.removeAttribute(w),N.defaultChecked=E,N.checked=T?E:!1}}else e.removeAttribute(b);else O||f.includes(w)&&(s||typeof y!="string")?e[w]=y:typeof y!="function"&&re(e,w,y)}}}return c&&Nt(!0),d}function $e(e,t,n=[],r,o=!1,i=bl){const s=n.map(i);var a=void 0,c={},d=e.nodeName==="SELECT",u=!1;Ar(()=>{var h=t(...s.map(l));Ql(e,a,h,r,o),u&&d&&"value"in h&&ur(e,h.value,!1);for(let g of Object.getOwnPropertySymbols(c))h[g]||Mn(c[g]);for(let g of Object.getOwnPropertySymbols(h)){var f=h[g];g.description===pl&&(!a||f!==a[g])&&(c[g]&&Mn(c[g]),c[g]=Fn(()=>Yl(e,()=>f)))}a=h}),d&&ps(e,()=>a.value),u=!0}function Oo(e){return e.__attributes??(e.__attributes={[_s]:e.nodeName.includes("-"),[ks]:e.namespaceURI===_l})}var di=new Map;function Ss(e){var t=di.get(e.nodeName);if(t)return t;di.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){n=Sl(r);for(var i in n)n[i].set&&t.push(i);r=cs(r)}return t}function fi(e,t,n=t){var r=Cl();ms(e,"input",o=>{var i=o?e.defaultValue:e.value;if(i=Zr(e)?Gr(i):i,n(i),r&&i!==(i=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=i??"",a!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}}),(pe&&e.defaultValue!==e.value||nt(t)==null&&e.value)&&n(Zr(e)?Gr(e.value):e.value),Pr(()=>{var o=t();Zr(e)&&o===Gr(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Zr(e){var t=e.type;return t==="number"||t==="range"}function Gr(e){return e===""?null:+e}var pt,Zt,Hn,Cr,Es;const Mr=class Mr{constructor(t){q(this,Cr);q(this,pt,new WeakMap);q(this,Zt);q(this,Hn);xn(this,Hn,t)}observe(t,n){var r=A(this,pt).get(t)||new Set;return r.add(n),A(this,pt).set(t,r),ii(this,Cr,Es).call(this).observe(t,A(this,Hn)),()=>{var o=A(this,pt).get(t);o.delete(n),o.size===0&&(A(this,pt).delete(t),A(this,Zt).unobserve(t))}}};pt=new WeakMap,Zt=new WeakMap,Hn=new WeakMap,Cr=new WeakSet,Es=function(){return A(this,Zt)??xn(this,Zt,new ResizeObserver(t=>{for(var n of t){Mr.entries.set(n.target,n);for(var r of A(this,pt).get(n.target)||[])r(n)}}))},Ae(Mr,"entries",new WeakMap);let go=Mr;var jl=new go({box:"border-box"});function hi(e,t,n){var r=jl.observe(e,()=>n(e[t]));Bn(()=>(nt(()=>n(e[t])),r))}function $l(e){X(e,e.v+1)}function ec(e){let t=0,n=co(0),r;return()=>{Ml()&&(l(n),Pr(()=>(t===0&&(r=nt(()=>e(()=>$l(n)))),t+=1,()=>{Pl().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}var tc={value:()=>{}};function Nr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ir(n)}function ir(e){this._=e}function nc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ir.prototype=Nr.prototype={constructor:ir,on:function(e,t){var n=this._,r=nc(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=rc(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=gi(n[o],e.name,t);else if(t==null)for(o in n)n[o]=gi(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ir(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function rc(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function gi(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=tc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vo="http://www.w3.org/1999/xhtml";const vi={svg:"http://www.w3.org/2000/svg",xhtml:vo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vi.hasOwnProperty(t)?{space:vi[t],local:e}:e}function oc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vo&&t.documentElement.namespaceURI===vo?t.createElement(e):t.createElementNS(n,e)}}function ic(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cs(e){var t=zr(e);return(t.local?ic:oc)(t)}function sc(){}function Do(e){return e==null?sc:function(){return this.querySelector(e)}}function ac(e){typeof e!="function"&&(e=Do(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,d,u=0;u<s;++u)(c=i[u])&&(d=e.call(c,c.__data__,u,i))&&("__data__"in c&&(d.__data__=c.__data__),a[u]=d);return new We(r,this._parents)}function lc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cc(){return[]}function Ms(e){return e==null?cc:function(){return this.querySelectorAll(e)}}function uc(e){return function(){return lc(e.apply(this,arguments))}}function dc(e){typeof e=="function"?e=uc(e):e=Ms(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,d=0;d<a;++d)(c=s[d])&&(r.push(e.call(c,c.__data__,d,s)),o.push(c));return new We(r,o)}function Ps(e){return function(){return this.matches(e)}}function As(e){return function(t){return t.matches(e)}}var fc=Array.prototype.find;function hc(e){return function(){return fc.call(this.children,e)}}function gc(){return this.firstElementChild}function vc(e){return this.select(e==null?gc:hc(typeof e=="function"?e:As(e)))}var mc=Array.prototype.filter;function yc(){return Array.from(this.children)}function wc(e){return function(){return mc.call(this.children,e)}}function xc(e){return this.selectAll(e==null?yc:wc(typeof e=="function"?e:As(e)))}function bc(e){typeof e!="function"&&(e=Ps(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,d=0;d<s;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&a.push(c);return new We(r,this._parents)}function Ns(e){return new Array(e.length)}function pc(){return new We(this._enter||this._groups.map(Ns),this._parents)}function dr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dr.prototype={constructor:dr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _c(e){return function(){return e}}function kc(e,t,n,r,o,i){for(var s=0,a,c=t.length,d=i.length;s<d;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new dr(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function Sc(e,t,n,r,o,i,s){var a,c,d=new Map,u=t.length,h=i.length,f=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(f[a]=g=s.call(c,c.__data__,a,t)+"",d.has(g)?o[a]=c:d.set(g,c));for(a=0;a<h;++a)g=s.call(e,i[a],a,i)+"",(c=d.get(g))?(r[a]=c,c.__data__=i[a],d.delete(g)):n[a]=new dr(e,i[a]);for(a=0;a<u;++a)(c=t[a])&&d.get(f[a])===c&&(o[a]=c)}function Ec(e){return e.__data__}function Cc(e,t){if(!arguments.length)return Array.from(this,Ec);var n=t?Sc:kc,r=this._parents,o=this._groups;typeof e!="function"&&(e=_c(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),d=0;d<i;++d){var u=r[d],h=o[d],f=h.length,g=Mc(e.call(u,u&&u.__data__,d,r)),m=g.length,_=a[d]=new Array(m),p=s[d]=new Array(m),w=c[d]=new Array(f);n(u,h,_,p,w,g,t);for(var O=0,b=0,y,N;O<m;++O)if(y=_[O]){for(O>=b&&(b=O+1);!(N=p[b])&&++b<m;);y._next=N||null}}return s=new We(s,r),s._enter=a,s._exit=c,s}function Mc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pc(){return new We(this._exit||this._groups.map(Ns),this._parents)}function Ac(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Nc(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var d=n[c],u=r[c],h=d.length,f=a[c]=new Array(h),g,m=0;m<h;++m)(g=d[m]||u[m])&&(f[m]=g);for(;c<o;++c)a[c]=n[c];return new We(a,this._parents)}function zc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Tc(e){e||(e=Ic);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),d,u=0;u<a;++u)(d=s[u])&&(c[u]=d);c.sort(t)}return new We(o,this._parents).order()}function Ic(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Oc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Dc(){return Array.from(this)}function Rc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Hc(){let e=0;for(const t of this)++e;return e}function Lc(){return!this.node()}function Vc(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function Fc(e){return function(){this.removeAttribute(e)}}function Bc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wc(e,t){return function(){this.setAttribute(e,t)}}function Xc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Yc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Kc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qc(e,t){var n=zr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bc:Fc:typeof t=="function"?n.local?Kc:Yc:n.local?Xc:Wc)(n,t))}function zs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zc(e){return function(){this.style.removeProperty(e)}}function Gc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Jc(e,t,n){return arguments.length>1?this.each((t==null?Zc:typeof t=="function"?Uc:Gc)(e,t,n??"")):Ut(this.node(),e)}function Ut(e,t){return e.style.getPropertyValue(t)||zs(e).getComputedStyle(e,null).getPropertyValue(t)}function Qc(e){return function(){delete this[e]}}function jc(e,t){return function(){this[e]=t}}function $c(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function eu(e,t){return arguments.length>1?this.each((t==null?Qc:typeof t=="function"?$c:jc)(e,t)):this.node()[e]}function Ts(e){return e.trim().split(/^|\s+/)}function Ro(e){return e.classList||new Is(e)}function Is(e){this._node=e,this._names=Ts(e.getAttribute("class")||"")}Is.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Os(e,t){for(var n=Ro(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Ds(e,t){for(var n=Ro(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function tu(e){return function(){Os(this,e)}}function nu(e){return function(){Ds(this,e)}}function ru(e,t){return function(){(t.apply(this,arguments)?Os:Ds)(this,e)}}function ou(e,t){var n=Ts(e+"");if(arguments.length<2){for(var r=Ro(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?ru:t?tu:nu)(n,t))}function iu(){this.textContent=""}function su(e){return function(){this.textContent=e}}function au(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lu(e){return arguments.length?this.each(e==null?iu:(typeof e=="function"?au:su)(e)):this.node().textContent}function cu(){this.innerHTML=""}function uu(e){return function(){this.innerHTML=e}}function du(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fu(e){return arguments.length?this.each(e==null?cu:(typeof e=="function"?du:uu)(e)):this.node().innerHTML}function hu(){this.nextSibling&&this.parentNode.appendChild(this)}function gu(){return this.each(hu)}function vu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mu(){return this.each(vu)}function yu(e){var t=typeof e=="function"?e:Cs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wu(){return null}function xu(e,t){var n=typeof e=="function"?e:Cs(e),r=t==null?wu:typeof t=="function"?t:Do(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bu(){var e=this.parentNode;e&&e.removeChild(this)}function pu(){return this.each(bu)}function _u(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ku(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Su(e){return this.select(e?ku:_u)}function Eu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cu(e){return function(t){e.call(this,t,this.__data__)}}function Mu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Pu(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Au(e,t,n){return function(){var r=this.__on,o,i=Cu(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Nu(e,t,n){var r=Mu(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,d=a.length,u;c<d;++c)for(o=0,u=a[c];o<i;++o)if((s=r[o]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Au:Pu,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function Rs(e,t,n){var r=zs(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function zu(e,t){return function(){return Rs(this,e,t)}}function Tu(e,t){return function(){return Rs(this,e,t.apply(this,arguments))}}function Iu(e,t){return this.each((typeof t=="function"?Tu:zu)(e,t))}function*Ou(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Hs=[null];function We(e,t){this._groups=e,this._parents=t}function Xn(){return new We([[document.documentElement]],Hs)}function Du(){return this}We.prototype=Xn.prototype={constructor:We,select:ac,selectAll:dc,selectChild:vc,selectChildren:xc,filter:bc,data:Cc,enter:pc,exit:Pc,join:Ac,merge:Nc,selection:Du,order:zc,sort:Tc,call:Oc,nodes:Dc,node:Rc,size:Hc,empty:Lc,each:Vc,attr:qc,style:Jc,property:eu,classed:ou,text:lu,html:fu,raise:gu,lower:mu,append:yu,insert:xu,remove:pu,clone:Su,datum:Eu,on:Nu,dispatch:Iu,[Symbol.iterator]:Ou};function Be(e){return typeof e=="string"?new We([[document.querySelector(e)]],[document.documentElement]):new We([[e]],Hs)}function Ru(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ue(e,t){if(e=Ru(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hu={passive:!1},Pn={capture:!0,passive:!1};function Ur(e){e.stopImmediatePropagation()}function Yt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ls(e){var t=e.document.documentElement,n=Be(e).on("dragstart.drag",Yt,Pn);"onselectstart"in t?n.on("selectstart.drag",Yt,Pn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vs(e,t){var n=e.document.documentElement,r=Be(e).on("dragstart.drag",null);t&&(r.on("click.drag",Yt,Pn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Jn=e=>()=>e;function mo(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}mo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lu(e){return!e.ctrlKey&&!e.button}function Vu(){return this.parentNode}function Fu(e,t){return t??{x:e.x,y:e.y}}function Bu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fs(){var e=Lu,t=Vu,n=Fu,r=Bu,o={},i=Nr("start","drag","end"),s=0,a,c,d,u,h=0;function f(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",p).on("touchmove.drag",w,Hu).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,N){if(!(u||!e.call(this,y,N))){var T=b(this,t.call(this,y,N),y,N,"mouse");T&&(Be(y.view).on("mousemove.drag",m,Pn).on("mouseup.drag",_,Pn),Ls(y.view),Ur(y),d=!1,a=y.clientX,c=y.clientY,T("start",y))}}function m(y){if(Yt(y),!d){var N=y.clientX-a,T=y.clientY-c;d=N*N+T*T>h}o.mouse("drag",y)}function _(y){Be(y.view).on("mousemove.drag mouseup.drag",null),Vs(y.view,d),Yt(y),o.mouse("end",y)}function p(y,N){if(e.call(this,y,N)){var T=y.changedTouches,E=t.call(this,y,N),D=T.length,V,R;for(V=0;V<D;++V)(R=b(this,E,y,N,T[V].identifier,T[V]))&&(Ur(y),R("start",y,T[V]))}}function w(y){var N=y.changedTouches,T=N.length,E,D;for(E=0;E<T;++E)(D=o[N[E].identifier])&&(Yt(y),D("drag",y,N[E]))}function O(y){var N=y.changedTouches,T=N.length,E,D;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<T;++E)(D=o[N[E].identifier])&&(Ur(y),D("end",y,N[E]))}function b(y,N,T,E,D,V){var R=i.copy(),W=Ue(V||T,N),S,C,v;if((v=n.call(y,new mo("beforestart",{sourceEvent:T,target:f,identifier:D,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:R}),E))!=null)return S=v.x-W[0]||0,C=v.y-W[1]||0,function M(k,I,H){var z=W,F;switch(k){case"start":o[D]=M,F=s++;break;case"end":delete o[D],--s;case"drag":W=Ue(H||I,N),F=s;break}R.call(k,y,new mo(k,{sourceEvent:I,subject:v,target:f,identifier:D,active:F,x:W[0]+S,y:W[1]+C,dx:W[0]-z[0],dy:W[1]-z[1],dispatch:R}),E)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Jn(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:Jn(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Jn(y),f):n},f.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Jn(!!y),f):r},f.on=function(){var y=i.on.apply(i,arguments);return y===i?f:y},f.clickDistance=function(y){return arguments.length?(h=(y=+y)*y,f):Math.sqrt(h)},f}function Ho(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yn(){}var An=.7,fr=1/An,Kt="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wu=/^#([0-9a-f]{3,8})$/,Xu=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),Yu=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),Ku=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${Nn}\\)$`),qu=new RegExp(`^rgba\\(${rt},${rt},${rt},${Nn}\\)$`),Zu=new RegExp(`^hsl\\(${Nn},${rt},${rt}\\)$`),Gu=new RegExp(`^hsla\\(${Nn},${rt},${rt},${Nn}\\)$`),mi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ho(Yn,It,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yi,formatHex:yi,formatHex8:Uu,formatHsl:Ju,formatRgb:wi,toString:wi});function yi(){return this.rgb().formatHex()}function Uu(){return this.rgb().formatHex8()}function Ju(){return Ws(this).formatHsl()}function wi(){return this.rgb().formatRgb()}function It(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xi(t):n===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xu.exec(e))?new He(t[1],t[2],t[3],1):(t=Yu.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ku.exec(e))?Qn(t[1],t[2],t[3],t[4]):(t=qu.exec(e))?Qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zu.exec(e))?_i(t[1],t[2]/100,t[3]/100,1):(t=Gu.exec(e))?_i(t[1],t[2]/100,t[3]/100,t[4]):mi.hasOwnProperty(e)?xi(mi[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function xi(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Qn(e,t,n,r){return r<=0&&(e=t=n=NaN),new He(e,t,n,r)}function Qu(e){return e instanceof Yn||(e=It(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function yo(e,t,n,r){return arguments.length===1?Qu(e):new He(e,t,n,r??1)}function He(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ho(He,yo,Bs(Yn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?An:Math.pow(An,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(zt(this.r),zt(this.g),zt(this.b),hr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bi,formatHex:bi,formatHex8:ju,formatRgb:pi,toString:pi}));function bi(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function ju(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function pi(){const e=hr(this.opacity);return`${e===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${e===1?")":`, ${e})`}`}function hr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function At(e){return e=zt(e),(e<16?"0":"")+e.toString(16)}function _i(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qe(e,t,n,r)}function Ws(e){if(e instanceof Qe)return new Qe(e.h,e.s,e.l,e.opacity);if(e instanceof Yn||(e=It(e)),!e)return new Qe;if(e instanceof Qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new Qe(s,a,c,e.opacity)}function $u(e,t,n,r){return arguments.length===1?Ws(e):new Qe(e,t,n,r??1)}function Qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ho(Qe,$u,Bs(Yn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new Qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?An:Math.pow(An,e),new Qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new He(Jr(e>=240?e-240:e+120,o,r),Jr(e,o,r),Jr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Qe(ki(this.h),jn(this.s),jn(this.l),hr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hr(this.opacity);return`${e===1?"hsl(":"hsla("}${ki(this.h)}, ${jn(this.s)*100}%, ${jn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ki(e){return e=(e||0)%360,e<0?e+360:e}function jn(e){return Math.max(0,Math.min(1,e||0))}function Jr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lo=e=>()=>e;function ed(e,t){return function(n){return e+n*t}}function td(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nd(e){return(e=+e)==1?Xs:function(t,n){return n-t?td(t,n,e):Lo(isNaN(t)?n:t)}}function Xs(e,t){var n=t-e;return n?ed(e,n):Lo(isNaN(e)?t:e)}const gr=function e(t){var n=nd(t);function r(o,i){var s=n((o=yo(o)).r,(i=yo(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),d=Xs(o.opacity,i.opacity);return function(u){return o.r=s(u),o.g=a(u),o.b=c(u),o.opacity=d(u),o+""}}return r.gamma=e,r}(1);function rd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function od(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sd(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)o[s]=En(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<r;++s)i[s]=o[s](a);return i}}function ad(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ld(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=En(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var wo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qr=new RegExp(wo.source,"g");function cd(e){return function(){return e}}function ud(e){return function(t){return e(t)+""}}function Ys(e,t){var n=wo.lastIndex=Qr.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=wo.exec(e))&&(o=Qr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:tt(r,o)})),n=Qr.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?ud(c[0].x):cd(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)a[(h=c[u]).i]=h.x(d);return a.join("")})}function En(e,t){var n=typeof t,r;return t==null||n==="boolean"?Lo(t):(n==="number"?tt:n==="string"?(r=It(t))?(t=r,gr):Ys:t instanceof It?gr:t instanceof Date?ad:od(t)?rd:Array.isArray(t)?sd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ld:tt)(e,t)}var Si=180/Math.PI,xo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ks(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Si,skewX:Math.atan(c)*Si,scaleX:s,scaleY:a}}var $n;function dd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xo:Ks(t.a,t.b,t.c,t.d,t.e,t.f)}function fd(e){return e==null||($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",e),!(e=$n.transform.baseVal.consolidate()))?xo:(e=e.matrix,Ks(e.a,e.b,e.c,e.d,e.e,e.f))}function qs(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function i(d,u,h,f,g,m){if(d!==h||u!==f){var _=g.push("translate(",null,t,null,n);m.push({i:_-4,x:tt(d,h)},{i:_-2,x:tt(u,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(d,u,h,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:h.push(o(h)+"rotate(",null,r)-2,x:tt(d,u)})):u&&h.push(o(h)+"rotate("+u+r)}function a(d,u,h,f){d!==u?f.push({i:h.push(o(h)+"skewX(",null,r)-2,x:tt(d,u)}):u&&h.push(o(h)+"skewX("+u+r)}function c(d,u,h,f,g,m){if(d!==h||u!==f){var _=g.push(o(g)+"scale(",null,",",null,")");m.push({i:_-4,x:tt(d,h)},{i:_-2,x:tt(u,f)})}else(h!==1||f!==1)&&g.push(o(g)+"scale("+h+","+f+")")}return function(d,u){var h=[],f=[];return d=e(d),u=e(u),i(d.translateX,d.translateY,u.translateX,u.translateY,h,f),s(d.rotate,u.rotate,h,f),a(d.skewX,u.skewX,h,f),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,h,f),d=u=null,function(g){for(var m=-1,_=f.length,p;++m<_;)h[(p=f[m]).i]=p.x(g);return h.join("")}}}var hd=qs(dd,"px, ","px)","deg)"),gd=qs(fd,", ",")",")"),vd=1e-12;function Ei(e){return((e=Math.exp(e))+1/e)/2}function md(e){return((e=Math.exp(e))-1/e)/2}function yd(e){return((e=Math.exp(2*e))-1)/(e+1)}const sr=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],d=i[2],u=s[0],h=s[1],f=s[2],g=u-a,m=h-c,_=g*g+m*m,p,w;if(_<vd)w=Math.log(f/d)/t,p=function(E){return[a+E*g,c+E*m,d*Math.exp(t*E*w)]};else{var O=Math.sqrt(_),b=(f*f-d*d+r*_)/(2*d*n*O),y=(f*f-d*d-r*_)/(2*f*n*O),N=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(y*y+1)-y);w=(T-N)/t,p=function(E){var D=E*w,V=Ei(N),R=d/(n*O)*(V*yd(t*D+N)-md(N));return[a+R*g,c+R*m,d*V/Ei(t*D+N)]}}return p.duration=w*1e3*t/Math.SQRT2,p}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var Jt=0,_n=0,bn=0,Zs=1e3,vr,kn,mr=0,Ot=0,Tr=0,zn=typeof performance=="object"&&performance.now?performance:Date,Gs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vo(){return Ot||(Gs(wd),Ot=zn.now()+Tr)}function wd(){Ot=0}function yr(){this._call=this._time=this._next=null}yr.prototype=Us.prototype={constructor:yr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vo():+n)+(t==null?0:+t),!this._next&&kn!==this&&(kn?kn._next=this:vr=this,kn=this),this._call=e,this._time=n,bo()},stop:function(){this._call&&(this._call=null,this._time=1/0,bo())}};function Us(e,t,n){var r=new yr;return r.restart(e,t,n),r}function xd(){Vo(),++Jt;for(var e=vr,t;e;)(t=Ot-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jt}function Ci(){Ot=(mr=zn.now())+Tr,Jt=_n=0;try{xd()}finally{Jt=0,pd(),Ot=0}}function bd(){var e=zn.now(),t=e-mr;t>Zs&&(Tr-=t,mr=e)}function pd(){for(var e,t=vr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vr=n);kn=e,bo(r)}function bo(e){if(!Jt){_n&&(_n=clearTimeout(_n));var t=e-Ot;t>24?(e<1/0&&(_n=setTimeout(Ci,e-zn.now()-Tr)),bn&&(bn=clearInterval(bn))):(bn||(mr=zn.now(),bn=setInterval(bd,Zs)),Jt=1,Gs(Ci))}}function Mi(e,t,n){var r=new yr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var _d=Nr("start","end","cancel","interrupt"),kd=[],Js=0,Pi=1,po=2,ar=3,Ai=4,_o=5,lr=6;function Ir(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Sd(e,n,{name:t,index:r,group:o,on:_d,tween:kd,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Js})}function Fo(e,t){var n=et(e,t);if(n.state>Js)throw new Error("too late; already scheduled");return n}function it(e,t){var n=et(e,t);if(n.state>ar)throw new Error("too late; already running");return n}function et(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sd(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Us(i,0,n.time);function i(d){n.state=Pi,n.timer.restart(s,n.delay,n.time),n.delay<=d&&s(d-n.delay)}function s(d){var u,h,f,g;if(n.state!==Pi)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===ar)return Mi(s);g.state===Ai?(g.state=lr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=lr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(Mi(function(){n.state===ar&&(n.state=Ai,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===po){for(n.state=ar,o=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++h]=g);o.length=h+1}}function a(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=_o,1),h=-1,f=o.length;++h<f;)o[h].call(e,u);n.state===_o&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=lr,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function cr(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>po&&r.state<_o,r.state=lr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Ed(e){return this.each(function(){cr(this,e)})}function Cd(e,t){var n,r;return function(){var o=it(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Md(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=it(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,d=o.length;c<d;++c)if(o[c].name===t){o[c]=a;break}c===d&&o.push(a)}i.tween=o}}function Pd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=et(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Cd:Md)(n,e,t))}function Bo(e,t,n){var r=e._id;return e.each(function(){var o=it(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return et(o,r).value[t]}}function Qs(e,t){var n;return(typeof t=="number"?tt:t instanceof It?gr:(n=It(t))?(t=n,gr):Ys)(e,t)}function Ad(e){return function(){this.removeAttribute(e)}}function Nd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zd(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Td(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Id(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Od(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Dd(e,t){var n=zr(e),r=n==="transform"?gd:Qs;return this.attrTween(e,typeof t=="function"?(n.local?Od:Id)(n,r,Bo(this,"attr."+e,t)):t==null?(n.local?Nd:Ad)(n):(n.local?Td:zd)(n,r,t))}function Rd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ld(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Hd(e,i)),n}return o._value=t,o}function Vd(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Rd(e,i)),n}return o._value=t,o}function Fd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=zr(e);return this.tween(n,(r.local?Ld:Vd)(r,t))}function Bd(e,t){return function(){Fo(this,e).delay=+t.apply(this,arguments)}}function Wd(e,t){return t=+t,function(){Fo(this,e).delay=t}}function Xd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bd:Wd)(t,e)):et(this.node(),t).delay}function Yd(e,t){return function(){it(this,e).duration=+t.apply(this,arguments)}}function Kd(e,t){return t=+t,function(){it(this,e).duration=t}}function qd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yd:Kd)(t,e)):et(this.node(),t).duration}function Zd(e,t){if(typeof t!="function")throw new Error;return function(){it(this,e).ease=t}}function Gd(e){var t=this._id;return arguments.length?this.each(Zd(t,e)):et(this.node(),t).ease}function Ud(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;it(this,e).ease=n}}function Jd(e){if(typeof e!="function")throw new Error;return this.each(Ud(this._id,e))}function Qd(e){typeof e!="function"&&(e=Ps(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,d=0;d<s;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&a.push(c);return new gt(r,this._parents,this._name,this._id)}function jd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],d=n[a],u=c.length,h=s[a]=new Array(u),f,g=0;g<u;++g)(f=c[g]||d[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new gt(s,this._parents,this._name,this._id)}function $d(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ef(e,t,n){var r,o,i=$d(t)?Fo:it;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function tf(e,t){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(e):this.each(ef(n,e,t))}function nf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rf(){return this.on("end.remove",nf(this._id))}function of(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Do(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,d=i[s]=new Array(c),u,h,f=0;f<c;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),d[f]=h,Ir(d[f],t,n,f,d,et(u,n)));return new gt(i,this._parents,t,n)}function sf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ms(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],d=c.length,u,h=0;h<d;++h)if(u=c[h]){for(var f=e.call(u,u.__data__,h,c),g,m=et(u,n),_=0,p=f.length;_<p;++_)(g=f[_])&&Ir(g,t,n,_,f,m);i.push(f),s.push(u)}return new gt(i,s,t,n)}var af=Xn.prototype.constructor;function lf(){return new af(this._groups,this._parents)}function cf(e,t){var n,r,o;return function(){var i=Ut(this,e),s=(this.style.removeProperty(e),Ut(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function js(e){return function(){this.style.removeProperty(e)}}function uf(e,t,n){var r,o=n+"",i;return function(){var s=Ut(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function df(e,t,n){var r,o,i;return function(){var s=Ut(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Ut(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function ff(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=it(this,e),d=c.on,u=c.value[i]==null?a||(a=js(t)):void 0;(d!==n||o!==u)&&(r=(n=d).copy()).on(s,o=u),c.on=r}}function hf(e,t,n){var r=(e+="")=="transform"?hd:Qs;return t==null?this.styleTween(e,cf(e,r)).on("end.style."+e,js(e)):typeof t=="function"?this.styleTween(e,df(e,r,Bo(this,"style."+e,t))).each(ff(this._id,e)):this.styleTween(e,uf(e,r,t),n).on("end.style."+e,null)}function gf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function vf(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&gf(e,s,n)),r}return i._value=t,i}function mf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,vf(e,t,n??""))}function yf(e){return function(){this.textContent=e}}function wf(e){return function(){var t=e(this);this.textContent=t??""}}function xf(e){return this.tween("text",typeof e=="function"?wf(Bo(this,"text",e)):yf(e==null?"":e+""))}function bf(e){return function(t){this.textContent=e.call(this,t)}}function pf(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&bf(o)),t}return r._value=e,r}function _f(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pf(e))}function kf(){for(var e=this._name,t=this._id,n=$s(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,d=0;d<a;++d)if(c=s[d]){var u=et(c,t);Ir(c,e,n,d,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gt(r,this._parents,e,n)}function Sf(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var d=it(this,r),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),d.on=t}),o===0&&i()})}var Ef=0;function gt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $s(){return++Ef}var at=Xn.prototype;gt.prototype={constructor:gt,select:of,selectAll:sf,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:Qd,merge:jd,selection:lf,transition:kf,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:tf,attr:Dd,attrTween:Fd,style:hf,styleTween:mf,text:xf,textTween:_f,remove:rf,tween:Pd,delay:Xd,duration:qd,ease:Gd,easeVarying:Jd,end:Sf,[Symbol.iterator]:at[Symbol.iterator]};function Cf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mf={time:null,delay:0,duration:250,ease:Cf};function Pf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Af(e){var t,n;e instanceof gt?(t=e._id,e=e._name):(t=$s(),(n=Mf).time=Vo(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,d=0;d<a;++d)(c=s[d])&&Ir(c,e,t,d,s,n||Pf(c,t));return new gt(r,this._parents,e,t)}Xn.prototype.interrupt=Ed;Xn.prototype.transition=Af;const er=e=>()=>e;function Nf(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function ct(e,t,n){this.k=e,this.x=t,this.y=n}ct.prototype={constructor:ct,scale:function(e){return e===1?this:new ct(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ct(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Or=new ct(1,0,0);ea.prototype=ct.prototype;function ea(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Or;return e.__zoom}function jr(e){e.stopImmediatePropagation()}function pn(e){e.preventDefault(),e.stopImmediatePropagation()}function zf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Tf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ni(){return this.__zoom||Or}function If(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Of(){return navigator.maxTouchPoints||"ontouchstart"in this}function Df(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function ta(){var e=zf,t=Tf,n=Df,r=If,o=Of,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=sr,d=Nr("start","zoom","end"),u,h,f,g=500,m=150,_=0,p=10;function w(v){v.property("__zoom",Ni).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",W).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(v,M,k,I){var H=v.selection?v.selection():v;H.property("__zoom",Ni),v!==H?N(v,M,k,I):H.interrupt().each(function(){T(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},w.scaleBy=function(v,M,k,I){w.scaleTo(v,function(){var H=this.__zoom.k,z=typeof M=="function"?M.apply(this,arguments):M;return H*z},k,I)},w.scaleTo=function(v,M,k,I){w.transform(v,function(){var H=t.apply(this,arguments),z=this.__zoom,F=k==null?y(H):typeof k=="function"?k.apply(this,arguments):k,L=z.invert(F),G=typeof M=="function"?M.apply(this,arguments):M;return n(b(O(z,G),F,L),H,s)},k,I)},w.translateBy=function(v,M,k,I){w.transform(v,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),s)},null,I)},w.translateTo=function(v,M,k,I,H){w.transform(v,function(){var z=t.apply(this,arguments),F=this.__zoom,L=I==null?y(z):typeof I=="function"?I.apply(this,arguments):I;return n(Or.translate(L[0],L[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof k=="function"?-k.apply(this,arguments):-k),z,s)},I,H)};function O(v,M){return M=Math.max(i[0],Math.min(i[1],M)),M===v.k?v:new ct(M,v.x,v.y)}function b(v,M,k){var I=M[0]-k[0]*v.k,H=M[1]-k[1]*v.k;return I===v.x&&H===v.y?v:new ct(v.k,I,H)}function y(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function N(v,M,k,I){v.on("start.zoom",function(){T(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(I).end()}).tween("zoom",function(){var H=this,z=arguments,F=T(H,z).event(I),L=t.apply(H,z),G=k==null?y(L):typeof k=="function"?k.apply(H,z):k,Y=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),Q=H.__zoom,U=typeof M=="function"?M.apply(H,z):M,J=c(Q.invert(G).concat(Y/Q.k),U.invert(G).concat(Y/U.k));return function(ne){if(ne===1)ne=U;else{var Z=J(ne),$=Y/Z[2];ne=new ct($,G[0]-Z[0]*$,G[1]-Z[1]*$)}F.zoom(null,ne)}})}function T(v,M,k){return!k&&v.__zooming||new E(v,M)}function E(v,M){this.that=v,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,M),this.taps=0}E.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,M){return this.mouse&&v!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var M=Be(this.that).datum();d.call(v,this.that,new Nf(v,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:d}),M)}};function D(v,...M){if(!e.apply(this,arguments))return;var k=T(this,M).event(v),I=this.__zoom,H=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,r.apply(this,arguments)))),z=Ue(v);if(k.wheel)(k.mouse[0][0]!==z[0]||k.mouse[0][1]!==z[1])&&(k.mouse[1]=I.invert(k.mouse[0]=z)),clearTimeout(k.wheel);else{if(I.k===H)return;k.mouse=[z,I.invert(z)],cr(this),k.start()}pn(v),k.wheel=setTimeout(F,m),k.zoom("mouse",n(b(O(I,H),k.mouse[0],k.mouse[1]),k.extent,s));function F(){k.wheel=null,k.end()}}function V(v,...M){if(f||!e.apply(this,arguments))return;var k=v.currentTarget,I=T(this,M,!0).event(v),H=Be(v.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",Y,!0),z=Ue(v,k),F=v.clientX,L=v.clientY;Ls(v.view),jr(v),I.mouse=[z,this.__zoom.invert(z)],cr(this),I.start();function G(Q){if(pn(Q),!I.moved){var U=Q.clientX-F,J=Q.clientY-L;I.moved=U*U+J*J>_}I.event(Q).zoom("mouse",n(b(I.that.__zoom,I.mouse[0]=Ue(Q,k),I.mouse[1]),I.extent,s))}function Y(Q){H.on("mousemove.zoom mouseup.zoom",null),Vs(Q.view,I.moved),pn(Q),I.event(Q).end()}}function R(v,...M){if(e.apply(this,arguments)){var k=this.__zoom,I=Ue(v.changedTouches?v.changedTouches[0]:v,this),H=k.invert(I),z=k.k*(v.shiftKey?.5:2),F=n(b(O(k,z),I,H),t.apply(this,M),s);pn(v),a>0?Be(this).transition().duration(a).call(N,F,I,v):Be(this).call(w.transform,F,I,v)}}function W(v,...M){if(e.apply(this,arguments)){var k=v.touches,I=k.length,H=T(this,M,v.changedTouches.length===I).event(v),z,F,L,G;for(jr(v),F=0;F<I;++F)L=k[F],G=Ue(L,this),G=[G,this.__zoom.invert(G),L.identifier],H.touch0?!H.touch1&&H.touch0[2]!==G[2]&&(H.touch1=G,H.taps=0):(H.touch0=G,z=!0,H.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(H.taps<2&&(h=G[0],u=setTimeout(function(){u=null},g)),cr(this),H.start())}}function S(v,...M){if(this.__zooming){var k=T(this,M).event(v),I=v.changedTouches,H=I.length,z,F,L,G;for(pn(v),z=0;z<H;++z)F=I[z],L=Ue(F,this),k.touch0&&k.touch0[2]===F.identifier?k.touch0[0]=L:k.touch1&&k.touch1[2]===F.identifier&&(k.touch1[0]=L);if(F=k.that.__zoom,k.touch1){var Y=k.touch0[0],Q=k.touch0[1],U=k.touch1[0],J=k.touch1[1],ne=(ne=U[0]-Y[0])*ne+(ne=U[1]-Y[1])*ne,Z=(Z=J[0]-Q[0])*Z+(Z=J[1]-Q[1])*Z;F=O(F,Math.sqrt(ne/Z)),L=[(Y[0]+U[0])/2,(Y[1]+U[1])/2],G=[(Q[0]+J[0])/2,(Q[1]+J[1])/2]}else if(k.touch0)L=k.touch0[0],G=k.touch0[1];else return;k.zoom("touch",n(b(F,L,G),k.extent,s))}}function C(v,...M){if(this.__zooming){var k=T(this,M).event(v),I=v.changedTouches,H=I.length,z,F;for(jr(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),z=0;z<H;++z)F=I[z],k.touch0&&k.touch0[2]===F.identifier?delete k.touch0:k.touch1&&k.touch1[2]===F.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(F=Ue(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<p)){var L=Be(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return w.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:er(+v),w):r},w.filter=function(v){return arguments.length?(e=typeof v=="function"?v:er(!!v),w):e},w.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:er(!!v),w):o},w.extent=function(v){return arguments.length?(t=typeof v=="function"?v:er([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),w):t},w.scaleExtent=function(v){return arguments.length?(i[0]=+v[0],i[1]=+v[1],w):[i[0],i[1]]},w.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function(v){return arguments.length?(n=v,w):n},w.duration=function(v){return arguments.length?(a=+v,w):a},w.interpolate=function(v){return arguments.length?(c=v,w):c},w.on=function(){var v=d.on.apply(d,arguments);return v===d?w:v},w.clickDistance=function(v){return arguments.length?(_=(v=+v)*v,w):Math.sqrt(_)},w.tapDistance=function(v){return arguments.length?(p=+v,w):p},w}const Tn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ko=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],na=["Enter"," ","Escape"],Rf={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Qt;(function(e){e.Strict="strict",e.Loose="loose"})(Qt||(Qt={}));var _t;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_t||(_t={}));var wr;(function(e){e.Partial="partial",e.Full="full"})(wr||(wr={}));const So={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var lt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(lt||(lt={}));var In;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(In||(In={}));var se;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(se||(se={}));const zi={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top};function Hf(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Ti(e,t,n){if(!n)return;const r=[];e.forEach((o,i)=>{t!=null&&t.has(i)||r.push(o)}),r.length&&n(r)}function Lf(e){return e===null?null:e?"valid":"invalid"}const ra=e=>"id"in e&&"source"in e&&"target"in e,Vf=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Wo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Kn=(e,t=[0,0])=>{const{width:n,height:r}=Mt(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},Ff=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):Wo(o)?o:t.nodeLookup.get(o.id));const a=s?xr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Dr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Rr(n)},qn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=xr(r);n=Dr(n,o)}}),Rr(n)},Xo=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...Zn(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const d of e.values()){const{measured:u,selectable:h=!0,hidden:f=!1}=d;if(s&&!h||f)continue;const g=u.width??d.width??d.initialWidth??null,m=u.height??d.height??d.initialHeight??null,_=On(a,$t(d)),p=(g??0)*(m??0),w=i&&_>0;(!d.internals.handleBounds||w||_>=p||d.dragging)&&c.push(d)}return c},Bf=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Wf(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Xf({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);const a=Wf(e,s),c=qn(a),d=Lr(c,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(d,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function oa({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let h=o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",Tn.error005());else{const g=a.measured.width,m=a.measured.height;g&&m&&(h=[[c,d],[c+g,d+m]])}else a&&en(s.extent)&&(h=[[s.extent[0][0]+c,s.extent[0][1]+d],[s.extent[1][0]+c,s.extent[1][1]+d]]);const f=en(h)?Dt(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(i==null||i("015",Tn.error015())),{position:{x:f.x-c+(s.measured.width??0)*u[0],y:f.y-d+(s.measured.height??0)*u[1]},positionAbsolute:f}}async function Yf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=i.has(f.id),m=!g&&f.parentId&&s.find(_=>_.id===f.parentId);(g||m)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),u=Bf(s,c);for(const f of c)a.has(f.id)&&!u.find(m=>m.id===f.id)&&u.push(f);if(!o)return{edges:u,nodes:s};const h=await o({nodes:s,edges:u});return typeof h=="boolean"?h?{edges:u,nodes:s}:{edges:[],nodes:[]}:h}const jt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Dt=(e={x:0,y:0},t,n)=>({x:jt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:jt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ia(e,t,n){const{width:r,height:o}=Mt(n),{x:i,y:s}=n.internals.positionAbsolute;return Dt(e,[[i,s],[i+r,s+o]],t)}const Ii=(e,t,n)=>e<t?jt(Math.abs(e-t),1,t)/t:e>n?-jt(Math.abs(e-n),1,t)/t:0,sa=(e,t,n=15,r=40)=>{const o=Ii(e.x,r,t.width-r)*n,i=Ii(e.y,r,t.height-r)*n;return[o,i]},Dr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Eo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Rr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),$t=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Wo(e)?e.internals.positionAbsolute:Kn(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},xr=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Wo(e)?e.internals.positionAbsolute:Kn(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},aa=(e,t)=>Rr(Dr(Eo(e),Eo(t))),On=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Oi=e=>ut(e.width)&&ut(e.height)&&ut(e.x)&&ut(e.y),ut=e=>!isNaN(e)&&isFinite(e),Kf=(e,t)=>{},Hr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Zn=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?Hr(a,s):a},br=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Lt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function qf(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Lt(e,n),o=Lt(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=Lt(e.top??e.y??0,n),o=Lt(e.bottom??e.y??0,n),i=Lt(e.left??e.x??0,t),s=Lt(e.right??e.x??0,t);return{top:r,right:s,bottom:o,left:i,x:i+s,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Zf(e,t,n,r,o,i){const{x:s,y:a}=br(e,[t,n,r]),{x:c,y:d}=br({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=o-c,h=i-d;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(h)}}const Lr=(e,t,n,r,o,i)=>{const s=qf(i,t,n),a=(t-s.x)/e.width,c=(n-s.y)/e.height,d=Math.min(a,c),u=jt(d,r,o),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*u,m=n/2-f*u,_=Zf(e,g,m,u,t,n),p={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:g-p.left+p.right,y:m-p.top+p.bottom,zoom:u}},pr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function en(e){return e!==void 0&&e!=="parent"}function Mt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function la(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Gf(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function Uf(e){return{...Rf,...e||{}}}function Cn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=ft(e),a=Zn({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:c,y:d}=n?Hr(a,t):a;return{xSnapped:c,ySnapped:d,...a}}const ca=e=>({width:e.offsetWidth,height:e.offsetHeight}),ua=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Jf=["INPUT","SELECT","TEXTAREA"];function da(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Jf.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const fa=e=>"clientX"in e,ft=(e,t)=>{var i,s;const n=fa(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Di=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...ca(s)}})};function Qf({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,d=t*.125+i*.375+a*.375+r*.125,u=Math.abs(c-e),h=Math.abs(d-t);return[c,d,u,h]}function tr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ri({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case se.Left:return[t-tr(t-r,i),n];case se.Right:return[t+tr(r-t,i),n];case se.Top:return[t,n-tr(n-o,i)];case se.Bottom:return[t,n+tr(o-n,i)]}}function ha({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:r,targetY:o,targetPosition:i=se.Top,curvature:s=.25}){const[a,c]=Ri({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[d,u]=Ri({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[h,f,g,m]=Qf({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${a},${c} ${d},${u} ${r},${o}`,h,f,g,m]}function ga({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function jf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function $f({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=Dr(xr(e),xr(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return On(s,Rr(i))>0}const eh=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,th=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),nh=(e,t)=>{if(!e.source||!e.target)return t;let n;return ra(e)?n={...e}:n={...e,id:eh(e)},th(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Yo({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=ga({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const Hi={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}},rh=({source:e,sourcePosition:t=se.Bottom,target:n})=>t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Li=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function oh({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:r=se.Top,center:o,offset:i}){const s=Hi[t],a=Hi[r],c={x:e.x+s.x*i,y:e.y+s.y*i},d={x:n.x+a.x*i,y:n.y+a.y*i},u=rh({source:c,sourcePosition:t,target:d}),h=u.x!==0?"x":"y",f=u[h];let g=[],m,_;const p={x:0,y:0},w={x:0,y:0},[O,b,y,N]=ga({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){m=o.x??O,_=o.y??b;const E=[{x:m,y:c.y},{x:m,y:d.y}],D=[{x:c.x,y:_},{x:d.x,y:_}];s[h]===f?g=h==="x"?E:D:g=h==="x"?D:E}else{const E=[{x:c.x,y:d.y}],D=[{x:d.x,y:c.y}];if(h==="x"?g=s.x===f?D:E:g=s.y===f?E:D,t===r){const C=Math.abs(e[h]-n[h]);if(C<=i){const v=Math.min(i-1,i-C);s[h]===f?p[h]=(c[h]>e[h]?-1:1)*v:w[h]=(d[h]>n[h]?-1:1)*v}}if(t!==r){const C=h==="x"?"y":"x",v=s[h]===a[C],M=c[C]>d[C],k=c[C]<d[C];(s[h]===1&&(!v&&M||v&&k)||s[h]!==1&&(!v&&k||v&&M))&&(g=h==="x"?E:D)}const V={x:c.x+p.x,y:c.y+p.y},R={x:d.x+w.x,y:d.y+w.y},W=Math.max(Math.abs(V.x-g[0].x),Math.abs(R.x-g[0].x)),S=Math.max(Math.abs(V.y-g[0].y),Math.abs(R.y-g[0].y));W>=S?(m=(V.x+R.x)/2,_=g[0].y):(m=g[0].x,_=(V.y+R.y)/2)}return[[e,{x:c.x+p.x,y:c.y+p.y},...g,{x:d.x+w.x,y:d.y+w.y},n],m,_,y,N]}function ih(e,t,n,r){const o=Math.min(Li(e,t)/2,Li(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+o*d},${s}Q ${i},${s} ${i},${s+o*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function Ko({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:r,targetY:o,targetPosition:i=se.Top,borderRadius:s=5,centerX:a,centerY:c,offset:d=20}){const[u,h,f,g,m]=oh({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:d});return[u.reduce((p,w,O)=>{let b="";return O>0&&O<u.length-1?b=ih(u[O-1],w,u[O+1],s):b=`${O===0?"M":"L"}${w.x} ${w.y}`,p+=b,p},""),h,f,g,m]}function Vi(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function sh(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Vi(t)||!Vi(n))return null;const r=t.internals.handleBounds||Fi(t.handles),o=n.internals.handleBounds||Fi(n.handles),i=Bi((r==null?void 0:r.source)??[],e.sourceHandle),s=Bi(e.connectionMode===Qt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(h=e.onError)==null||h.call(e,"008",Tn.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||se.Bottom,c=(s==null?void 0:s.position)||se.Top,d=Dn(t,i,a),u=Dn(n,s,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function Fi(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Dn(e,t,n=se.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Mt(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case se.Top:return{x:o+s/2,y:i};case se.Right:return{x:o+s,y:i+a/2};case se.Bottom:return{x:o+s/2,y:i+a};case se.Left:return{x:o,y:i+a/2}}}function Bi(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Co(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function ah(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const d=Co(c,t);i.has(d)||(s.push({id:d,color:c.color||n,...c}),i.add(d))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const qo={nodeOrigin:[0,0],nodeExtent:ko,elevateNodesOnSelect:!0,defaults:{}},lh={...qo,checkEquality:!0};function Zo(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function ch(e,t,n){const r=Zo(qo,n);for(const o of e.values())if(o.parentId)Go(o,e,t,r);else{const i=Kn(o,r.nodeOrigin),s=en(o.extent)?o.extent:r.nodeExtent,a=Dt(i,s,Mt(o));o.internals.positionAbsolute=a}}function uh(e,t,n,r){var c,d;const o=Zo(lh,r);let i=e.length>0;const s=new Map(t),a=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let h=s.get(u.id);if(o.checkEquality&&u===(h==null?void 0:h.internals.userNode))t.set(u.id,h);else{const f=Kn(u,o.nodeOrigin),g=en(u.extent)?u.extent:o.nodeExtent,m=Dt(f,g,Mt(u));h={...o.defaults,...u,measured:{width:(c=u.measured)==null?void 0:c.width,height:(d=u.measured)==null?void 0:d.height},internals:{positionAbsolute:m,handleBounds:u.measured?h==null?void 0:h.internals.handleBounds:void 0,z:va(u,a),userNode:u}},t.set(u.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(i=!1),u.parentId&&Go(h,t,n,r)}return i}function dh(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Go(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=Zo(qo,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}dh(e,n);const d=o?1e3:0,{x:u,y:h,z:f}=fh(e,c,i,s,d),{positionAbsolute:g}=e.internals,m=u!==g.x||h!==g.y;(m||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:u,y:h}:g,z:f}})}function va(e,t){return(ut(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function fh(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,a=Mt(e),c=Kn(e,n),d=en(e.extent)?Dt(c,e.extent,a):c;let u=Dt({x:i+d.x,y:s+d.y},r,a);e.extent==="parent"&&(u=ia(u,a,t));const h=va(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>h?f:h}}function hh(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const d=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??$t(c),u=aa(d,a.rect);i.set(a.parentId,{expandedRect:u,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},d)=>{var b;const u=c.internals.positionAbsolute,h=Mt(c),f=c.origin??r,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,m=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,_=Math.max(h.width,Math.round(a.width)),p=Math.max(h.height,Math.round(a.height)),w=(_-h.width)*f[0],O=(p-h.height)*f[1];(g>0||m>0||w||O)&&(o.push({id:d,type:"position",position:{x:c.position.x-g+w,y:c.position.y-m+O}}),(b=n.get(d))==null||b.forEach(y=>{e.some(N=>N.id===y.id)||o.push({id:y.id,type:"position",position:{x:y.position.x+g,y:y.position.y+m}})})),(h.width<a.width||h.height<a.height||g||m)&&o.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:_+(g?f[0]*g-w:0),height:p+(m?f[1]*m-O:0)}})}),o}function gh(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],d=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const m=ca(f.nodeElement),_=g.measured.width!==m.width||g.measured.height!==m.height;if(!!(m.width&&m.height&&(_||!g.internals.handleBounds||f.force))){const w=f.nodeElement.getBoundingClientRect(),O=en(g.extent)?g.extent:i;let{positionAbsolute:b}=g.internals;g.parentId&&g.extent==="parent"?b=ia(b,m,t.get(g.parentId)):O&&(b=Dt(b,O,m));const y={...g,measured:m,internals:{...g.internals,positionAbsolute:b,handleBounds:{source:Di("source",f.nodeElement,w,u,g.id),target:Di("target",f.nodeElement,w,u,g.id)}}};t.set(g.id,y),g.parentId&&Go(y,t,n,{nodeOrigin:o}),a=!0,_&&(c.push({id:g.id,type:"dimensions",dimensions:m}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:$t(y,o)}))}}if(h.length>0){const f=hh(h,t,n,o);c.push(...f)}return{changes:c,updatedInternals:a}}async function vh({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Wi(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,t)),i){s=`${o}-${e}-${i}`;const d=r.get(s)||new Map;r.set(s,d.set(n,t))}}function mh(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},d=`${o}-${s}--${i}-${a}`,u=`${i}-${a}--${o}-${s}`;Wi("source",c,u,e,o,s),Wi("target",c,d,e,i,a),t.set(r.id,r)}}function ma(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ma(n,t):!1}function Xi(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function yh(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!ma(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function $r({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,c;const o=[];for(const[d,u]of t){const h=(s=n.get(d))==null?void 0:s.internals.userNode;h&&o.push({...h,position:u.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function wh({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,c=!1,d={x:0,y:0},u=null,h=!1,f=null,g=!1;function m({noDragClassName:p,handleSelector:w,domNode:O,isSelectable:b,nodeId:y,nodeClickDistance:N=0}){f=Be(O);function T({x:R,y:W},S){const{nodeLookup:C,nodeExtent:v,snapGrid:M,snapToGrid:k,nodeOrigin:I,onNodeDrag:H,onSelectionDrag:z,onError:F,updateNodePositions:L}=t();i={x:R,y:W};let G=!1,Y={x:0,y:0,x2:0,y2:0};if(a.size>1&&v){const Q=qn(a);Y=Eo(Q)}for(const[Q,U]of a){if(!C.has(Q))continue;let J={x:R-U.distance.x,y:W-U.distance.y};k&&(J=Hr(J,M));let ne=[[v[0][0],v[0][1]],[v[1][0],v[1][1]]];if(a.size>1&&v&&!U.extent){const{positionAbsolute:ue}=U.internals,ae=ue.x-Y.x+v[0][0],le=ue.x+U.measured.width-Y.x2+v[1][0],Pe=ue.y-Y.y+v[0][1],ve=ue.y+U.measured.height-Y.y2+v[1][1];ne=[[ae,Pe],[le,ve]]}const{position:Z,positionAbsolute:$}=oa({nodeId:Q,nextPosition:J,nodeLookup:C,nodeExtent:ne,nodeOrigin:I,onError:F});G=G||U.position.x!==Z.x||U.position.y!==Z.y,U.position=Z,U.internals.positionAbsolute=$}if(G&&(L(a,!0),S&&(r||H||!y&&z))){const[Q,U]=$r({nodeId:y,dragItems:a,nodeLookup:C});r==null||r(S,a,Q,U),H==null||H(S,Q,U),y||z==null||z(S,U)}}async function E(){if(!u)return;const{transform:R,panBy:W,autoPanSpeed:S,autoPanOnNodeDrag:C}=t();if(!C){c=!1,cancelAnimationFrame(s);return}const[v,M]=sa(d,u,S);(v!==0||M!==0)&&(i.x=(i.x??0)-v/R[2],i.y=(i.y??0)-M/R[2],await W({x:v,y:M})&&T(i,null)),s=requestAnimationFrame(E)}function D(R){var G;const{nodeLookup:W,multiSelectionActive:S,nodesDraggable:C,transform:v,snapGrid:M,snapToGrid:k,selectNodesOnDrag:I,onNodeDragStart:H,onSelectionDragStart:z,unselectNodesAndEdges:F}=t();h=!0,(!I||!b)&&!S&&y&&((G=W.get(y))!=null&&G.selected||F()),b&&I&&y&&(e==null||e(y));const L=Cn(R.sourceEvent,{transform:v,snapGrid:M,snapToGrid:k,containerBounds:u});if(i=L,a=yh(W,C,L,y),a.size>0&&(n||H||!y&&z)){const[Y,Q]=$r({nodeId:y,dragItems:a,nodeLookup:W});n==null||n(R.sourceEvent,a,Y,Q),H==null||H(R.sourceEvent,Y,Q),y||z==null||z(R.sourceEvent,Q)}}const V=Fs().clickDistance(N).on("start",R=>{const{domNode:W,nodeDragThreshold:S,transform:C,snapGrid:v,snapToGrid:M}=t();u=(W==null?void 0:W.getBoundingClientRect())||null,g=!1,S===0&&D(R),i=Cn(R.sourceEvent,{transform:C,snapGrid:v,snapToGrid:M,containerBounds:u}),d=ft(R.sourceEvent,u)}).on("drag",R=>{const{autoPanOnNodeDrag:W,transform:S,snapGrid:C,snapToGrid:v,nodeDragThreshold:M,nodeLookup:k}=t(),I=Cn(R.sourceEvent,{transform:S,snapGrid:C,snapToGrid:v,containerBounds:u});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||y&&!k.has(y))&&(g=!0),!g){if(!c&&W&&h&&(c=!0,E()),!h){const H=I.xSnapped-(i.x??0),z=I.ySnapped-(i.y??0);Math.sqrt(H*H+z*z)>M&&D(R)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&a&&h&&(d=ft(R.sourceEvent,u),T(I,R.sourceEvent))}}).on("end",R=>{if(!(!h||g)&&(c=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:W,updateNodePositions:S,onNodeDragStop:C,onSelectionDragStop:v}=t();if(S(a,!1),o||C||!y&&v){const[M,k]=$r({nodeId:y,dragItems:a,nodeLookup:W,dragging:!1});o==null||o(R.sourceEvent,a,M,k),C==null||C(R.sourceEvent,M,k),y||v==null||v(R.sourceEvent,k)}}}).filter(R=>{const W=R.target;return!R.button&&(!p||!Xi(W,`.${p}`,O))&&(!w||Xi(W,w,O))});f.call(V)}function _(){f==null||f.on(".drag",null)}return{update:m,destroy:_}}function xh(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())On(o,$t(i))>0&&r.push(i);return r}const bh=250;function ph(e,t,n,r){var a,c;let o=[],i=1/0;const s=xh(e,n,t+bh);for(const d of s){const u=[...((a=d.internals.handleBounds)==null?void 0:a.source)??[],...((c=d.internals.handleBounds)==null?void 0:c.target)??[]];for(const h of u){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=Dn(d,h,h.position,!0),m=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));m>t||(m<i?(o=[{...h,x:f,y:g}],i=m):m===i&&o.push({...h,x:f,y:g}))}}if(!o.length)return null;if(o.length>1){const d=r.type==="source"?"target":"source";return o.find(u=>u.type===d)??o[0]}return o[0]}function ya(e,t,n,r,o,i=!1){var d,u,h;const s=r.get(e);if(!s)return null;const a=o==="strict"?(d=s.internals.handleBounds)==null?void 0:d[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...Dn(s,c,c.position,!0)}:c}function wa(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function _h(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const xa=()=>!0;function kh(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:h,panBy:f,cancelConnection:g,onConnectStart:m,onConnect:_,onConnectEnd:p,isValidConnection:w=xa,onReconnectEnd:O,updateConnection:b,getTransform:y,getFromHandle:N,autoPanSpeed:T}){const E=ua(e.target);let D=0,V;const{x:R,y:W}=ft(e),S=E==null?void 0:E.elementFromPoint(R,W),C=wa(i,S),v=a==null?void 0:a.getBoundingClientRect();if(!v||!C)return;const M=ya(o,C,r,c,t);if(!M)return;let k=ft(e,v),I=!1,H=null,z=!1,F=null;function L(){if(!u||!v)return;const[$,ue]=sa(k,v,T);f({x:$,y:ue}),D=requestAnimationFrame(L)}const G={...M,nodeId:o,type:C,position:M.position},Y=c.get(o),U={inProgress:!0,isValid:null,from:Dn(Y,G,se.Left,!0),fromHandle:G,fromPosition:G.position,fromNode:Y,to:k,toHandle:null,toPosition:zi[G.position],toNode:null};b(U);let J=U;m==null||m(e,{nodeId:o,handleId:r,handleType:C});function ne($){if(!N()||!G){Z($);return}const ue=y();k=ft($,v),V=ph(Zn(k,ue,!1,[1,1]),n,c,G),I||(L(),I=!0);const ae=ba($,{handle:V,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:w,doc:E,lib:d,flowId:h,nodeLookup:c});F=ae.handleDomNode,H=ae.connection,z=_h(!!V,ae.isValid);const le={...J,isValid:z,to:ae.toHandle&&z?br({x:ae.toHandle.x,y:ae.toHandle.y},ue):k,toHandle:ae.toHandle,toPosition:z&&ae.toHandle?ae.toHandle.position:zi[G.position],toNode:ae.toHandle?c.get(ae.toHandle.nodeId):null};z&&V&&J.toHandle&&le.toHandle&&J.toHandle.type===le.toHandle.type&&J.toHandle.nodeId===le.toHandle.nodeId&&J.toHandle.id===le.toHandle.id&&J.to.x===le.to.x&&J.to.y===le.to.y||(b(le),J=le)}function Z($){(V||F)&&H&&z&&(_==null||_(H));const{inProgress:ue,...ae}=J,le={...ae,toPosition:J.toHandle?J.toPosition:null};p==null||p($,le),i&&(O==null||O($,le)),g(),cancelAnimationFrame(D),I=!1,z=!1,H=null,F=null,E.removeEventListener("mousemove",ne),E.removeEventListener("mouseup",Z),E.removeEventListener("touchmove",ne),E.removeEventListener("touchend",Z)}E.addEventListener("mousemove",ne),E.addEventListener("mouseup",Z),E.addEventListener("touchmove",ne),E.addEventListener("touchend",Z)}function ba(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:d=xa,nodeLookup:u}){const h=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:m}=ft(e),_=s.elementFromPoint(g,m),p=_!=null&&_.classList.contains(`${a}-flow__handle`)?_:f,w={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const O=wa(void 0,p),b=p.getAttribute("data-nodeid"),y=p.getAttribute("data-handleid"),N=p.classList.contains("connectable"),T=p.classList.contains("connectableend");if(!b||!O)return w;const E={source:h?b:r,sourceHandle:h?y:o,target:h?r:b,targetHandle:h?o:y};w.connection=E;const V=N&&T&&(n===Qt.Strict?h&&O==="source"||!h&&O==="target":b!==r||y!==o);w.isValid=V&&d(E),w.toHandle=ya(b,O,y,u,n,!0)}return w}const Yi={onPointerDown:kh,isValid:ba};function Sh({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Be(e);function i({translateExtent:a,width:c,height:d,zoomStep:u=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const m=b=>{const y=n();if(b.sourceEvent.type!=="wheel"||!t)return;const N=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*u,T=y[2]*Math.pow(2,N);t.scaleTo(T)};let _=[0,0];const p=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(_=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},w=b=>{const y=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const N=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],T=[N[0]-_[0],N[1]-_[1]];_=N;const E=r()*Math.max(y[2],Math.log(y[2]))*(g?-1:1),D={x:y[0]-T[0]*E,y:y[1]-T[1]*E},V=[[0,0],[c,d]];t.setViewportConstrained({x:D.x,y:D.y,zoom:y[2]},V,a)},O=ta().on("start",p).on("zoom",h?w:null).on("zoom.wheel",f?m:null);o.call(O,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:Ue}}const Eh=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Vr=e=>({x:e.x,y:e.y,zoom:e.k}),eo=({x:e,y:t,zoom:n})=>Or.translate(e,t).scale(n),Wt=(e,t)=>e.target.closest(`.${t}`),pa=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ch=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,to=(e,t=0,n=Ch,r=()=>{})=>{const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},_a=e=>{const t=e.ctrlKey&&pr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Mh({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(Wt(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&s){const p=Ue(u),w=_a(u),O=h*Math.pow(2,w);r.scaleTo(n,O,p,u);return}const f=u.deltaMode===1?20:1;let g=o===_t.Vertical?0:u.deltaX*f,m=o===_t.Horizontal?0:u.deltaY*f;!pr()&&u.shiftKey&&o!==_t.Vertical&&(g=u.deltaY*f,m=0),r.translateBy(n,-(g/h)*i,-(m/h)*i,{internal:!0});const _=Vr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,_)),e.isPanScrolling&&(c==null||c(u,_),e.panScrollTimeout=setTimeout(()=>{d==null||d(u,_),e.isPanScrolling=!1},150))}}function Ph({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i=r.type==="wheel",s=!t&&i&&!r.ctrlKey,a=Wt(r,e);if(r.ctrlKey&&i&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,o)}}function Ah({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Vr(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function Nh({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&pa(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,Vr(i.transform)))}}function zh({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&pa(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&Eh(e.prevViewport,s.transform))){const c=Vr(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,c)},n?150:0)}}}function Th({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:d}){return u=>{var m;const h=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Wt(u,`${d}-flow__node`)||Wt(u,`${d}-flow__edge`)))return!0;if(!r&&!h&&!o&&!i&&!n||s||Wt(u,a)&&u.type==="wheel"||Wt(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((m=u.touches)==null?void 0:m.length)>1)return u.preventDefault(),!1;if(!h&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Ih({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=ta().clickDistance(!ut(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),g=Be(e).call(f);b({x:i.x,y:i.y,zoom:jt(i.zoom,t,n)},[[0,0],[h.width,h.height]],o);const m=g.on("wheel.zoom"),_=g.on("dblclick.zoom");f.wheelDelta(_a);function p(S,C){return g?new Promise(v=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?En:sr).transform(to(g,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>v(!0)),S)}):Promise.resolve(!1)}function w({noWheelClassName:S,noPanClassName:C,onPaneContextMenu:v,userSelectionActive:M,panOnScroll:k,panOnDrag:I,panOnScrollMode:H,panOnScrollSpeed:z,preventScrolling:F,zoomOnPinch:L,zoomOnScroll:G,zoomOnDoubleClick:Y,zoomActivationKeyPressed:Q,lib:U,onTransformChange:J}){M&&!u.isZoomingOrPanning&&O();const Z=k&&!Q&&!M?Mh({zoomPanValues:u,noWheelClassName:S,d3Selection:g,d3Zoom:f,panOnScrollMode:H,panOnScrollSpeed:z,zoomOnPinch:L,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):Ph({noWheelClassName:S,preventScrolling:F,d3ZoomHandler:m});if(g.on("wheel.zoom",Z,{passive:!1}),!M){const ue=Ah({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:a});f.on("start",ue);const ae=Nh({zoomPanValues:u,panOnDrag:I,onPaneContextMenu:!!v,onPanZoom:s,onTransformChange:J});f.on("zoom",ae);const le=zh({zoomPanValues:u,panOnDrag:I,panOnScroll:k,onPaneContextMenu:v,onPanZoomEnd:c,onDraggingChange:d});f.on("end",le)}const $=Th({zoomActivationKeyPressed:Q,panOnDrag:I,zoomOnScroll:G,panOnScroll:k,zoomOnDoubleClick:Y,zoomOnPinch:L,userSelectionActive:M,noPanClassName:C,noWheelClassName:S,lib:U});f.filter($),Y?g.on("dblclick.zoom",_):g.on("dblclick.zoom",null)}function O(){f.on("zoom",null)}async function b(S,C,v){const M=eo(S),k=f==null?void 0:f.constrain()(M,C,v);return k&&await p(k),new Promise(I=>I(k))}async function y(S,C){const v=eo(S);return await p(v,C),new Promise(M=>M(v))}function N(S){if(g){const C=eo(S),v=g.property("__zoom");(v.k!==S.zoom||v.x!==S.x||v.y!==S.y)&&(f==null||f.transform(g,C,null,{sync:!0}))}}function T(){const S=g?ea(g.node()):{x:0,y:0,k:1};return{x:S.x,y:S.y,zoom:S.k}}function E(S,C){return g?new Promise(v=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?En:sr).scaleTo(to(g,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>v(!0)),S)}):Promise.resolve(!1)}function D(S,C){return g?new Promise(v=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?En:sr).scaleBy(to(g,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>v(!0)),S)}):Promise.resolve(!1)}function V(S){f==null||f.scaleExtent(S)}function R(S){f==null||f.translateExtent(S)}function W(S){const C=!ut(S)||S<0?0:S;f==null||f.clickDistance(C)}return{update:w,destroy:O,setViewport:y,setViewportConstrained:b,getViewport:T,scaleTo:E,scaleBy:D,setScaleExtent:V,setTranslateExtent:R,syncViewport:N,setClickDistance:W}}var Rn;(function(e){e.Line="line",e.Handle="handle"})(Rn||(Rn={}));const Oh=["top-left","top-right","bottom-left","bottom-right"],Dh=["top","right","bottom","left"];function Rh({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function Hh(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function mt(e,t){return Math.max(0,t-e)}function yt(e,t){return Math.max(0,e-t)}function nr(e,t,n){return Math.max(0,t-e,e-n)}function Ki(e,t){return e?!t:t}function Lh(e,t,n,r,o,i,s,a){let{affectsX:c,affectsY:d}=t;const{isHorizontal:u,isVertical:h}=t,f=u&&h,{xSnapped:g,ySnapped:m}=n,{minWidth:_,maxWidth:p,minHeight:w,maxHeight:O}=r,{x:b,y,width:N,height:T,aspectRatio:E}=e;let D=Math.floor(u?g-e.pointerX:0),V=Math.floor(h?m-e.pointerY:0);const R=N+(c?-D:D),W=T+(d?-V:V),S=-i[0]*N,C=-i[1]*T;let v=nr(R,_,p),M=nr(W,w,O);if(s){let H=0,z=0;c&&D<0?H=mt(b+D+S,s[0][0]):!c&&D>0&&(H=yt(b+R+S,s[1][0])),d&&V<0?z=mt(y+V+C,s[0][1]):!d&&V>0&&(z=yt(y+W+C,s[1][1])),v=Math.max(v,H),M=Math.max(M,z)}if(a){let H=0,z=0;c&&D>0?H=yt(b+D,a[0][0]):!c&&D<0&&(H=mt(b+R,a[1][0])),d&&V>0?z=yt(y+V,a[0][1]):!d&&V<0&&(z=mt(y+W,a[1][1])),v=Math.max(v,H),M=Math.max(M,z)}if(o){if(u){const H=nr(R/E,w,O)*E;if(v=Math.max(v,H),s){let z=0;!c&&!d||c&&!d&&f?z=yt(y+C+R/E,s[1][1])*E:z=mt(y+C+(c?D:-D)/E,s[0][1])*E,v=Math.max(v,z)}if(a){let z=0;!c&&!d||c&&!d&&f?z=mt(y+R/E,a[1][1])*E:z=yt(y+(c?D:-D)/E,a[0][1])*E,v=Math.max(v,z)}}if(h){const H=nr(W*E,_,p)/E;if(M=Math.max(M,H),s){let z=0;!c&&!d||d&&!c&&f?z=yt(b+W*E+S,s[1][0])/E:z=mt(b+(d?V:-V)*E+S,s[0][0])/E,M=Math.max(M,z)}if(a){let z=0;!c&&!d||d&&!c&&f?z=mt(b+W*E,a[1][0])/E:z=yt(b+(d?V:-V)*E,a[0][0])/E,M=Math.max(M,z)}}}V=V+(V<0?M:-M),D=D+(D<0?v:-v),o&&(f?R>W*E?V=(Ki(c,d)?-D:D)/E:D=(Ki(c,d)?-V:V)*E:u?(V=D/E,d=c):(D=V*E,c=d));const k=c?b+D:b,I=d?y+V:y;return{width:N+(c?-D:D),height:T+(d?-V:V),x:i[0]*D*(c?-1:1)+k,y:i[1]*V*(d?-1:1)+I}}const ka={width:0,height:0,x:0,y:0},Vh={...ka,pointerX:0,pointerY:0,aspectRatio:1};function Fh(e){return[[0,0],[e.measured.width,e.measured.height]]}function Bh(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[r-a,o-c],[r+i-a,o+s-c]]}function Wh({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Be(e);function s({controlPosition:c,boundaries:d,keepAspectRatio:u,resizeDirection:h,onResizeStart:f,onResize:g,onResizeEnd:m,shouldResize:_}){let p={...ka},w={...Vh};const O=Hh(c);let b,y=null,N=[],T,E,D;const V=Fs().on("start",R=>{const{nodeLookup:W,transform:S,snapGrid:C,snapToGrid:v,nodeOrigin:M,paneDomNode:k}=n();if(b=W.get(t),!b)return;y=(k==null?void 0:k.getBoundingClientRect())??null;const{xSnapped:I,ySnapped:H}=Cn(R.sourceEvent,{transform:S,snapGrid:C,snapToGrid:v,containerBounds:y});p={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},w={...p,pointerX:I,pointerY:H,aspectRatio:p.width/p.height},T=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(T=W.get(b.parentId),E=T&&b.extent==="parent"?Fh(T):void 0),N=[],D=void 0;for(const[z,F]of W)if(F.parentId===t&&(N.push({id:z,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const L=Bh(F,b,F.origin??M);D?D=[[Math.min(L[0][0],D[0][0]),Math.min(L[0][1],D[0][1])],[Math.max(L[1][0],D[1][0]),Math.max(L[1][1],D[1][1])]]:D=L}f==null||f(R,{...p})}).on("drag",R=>{const{transform:W,snapGrid:S,snapToGrid:C,nodeOrigin:v}=n(),M=Cn(R.sourceEvent,{transform:W,snapGrid:S,snapToGrid:C,containerBounds:y}),k=[];if(!b)return;const{x:I,y:H,width:z,height:F}=p,L={},G=b.origin??v,{width:Y,height:Q,x:U,y:J}=Lh(w,O,M,d,u,G,E,D),ne=Y!==z,Z=Q!==F,$=U!==I&&ne,ue=J!==H&&Z;if(!$&&!ue&&!ne&&!Z)return;if(($||ue||G[0]===1||G[1]===1)&&(L.x=$?U:p.x,L.y=ue?J:p.y,p.x=L.x,p.y=L.y,N.length>0)){const ve=U-I,Ne=J-H;for(const Oe of N)Oe.position={x:Oe.position.x-ve+G[0]*(Y-z),y:Oe.position.y-Ne+G[1]*(Q-F)},k.push(Oe)}if((ne||Z)&&(L.width=ne&&(!h||h==="horizontal")?Y:p.width,L.height=Z&&(!h||h==="vertical")?Q:p.height,p.width=L.width,p.height=L.height),T&&b.expandParent){const ve=G[0]*(L.width??0);L.x&&L.x<ve&&(p.x=ve,w.x=w.x-(L.x-ve));const Ne=G[1]*(L.height??0);L.y&&L.y<Ne&&(p.y=Ne,w.y=w.y-(L.y-Ne))}const ae=Rh({width:p.width,prevWidth:z,height:p.height,prevHeight:F,affectsX:O.affectsX,affectsY:O.affectsY}),le={...p,direction:ae};(_==null?void 0:_(R,le))!==!1&&(g==null||g(R,le),r(L,k))}).on("end",R=>{m==null||m(R,{...p}),o==null||o({...p})});i.call(V)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var Xh=de("<div><!></div>");function je(e,t){oe(t,!0);let n=B(t,"id",3,null),r=B(t,"type",3,"source"),o=B(t,"position",19,()=>se.Top),i=B(t,"isConnectableStart",3,!0),s=B(t,"isConnectableEnd",3,!0),a=Ee(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const c=Tt("svelteflow__node_id"),d=Tt("svelteflow__node_connectable");let u=x(()=>r()==="target"),h=x(()=>t.isConnectable!==void 0?t.isConnectable:d.value),f=Ve(),g=x(()=>f.ariaLabelConfig),m=null;gs(()=>{if(t.onconnect||t.ondisconnect){f.edges;let S=f.connectionLookup.get(`${c}-${r()}${n()?`-${n()}`:""}`);if(m&&!Hf(S,m)){const C=S??new Map;Ti(m,C,t.ondisconnect),Ti(C,m,t.onconnect)}m=new Map(S)}});let _=x(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:S,toHandle:C,isValid:v}=f.connection,M=S&&S.nodeId===c&&S.type===r()&&S.id===n(),k=C&&C.nodeId===c&&C.type===r()&&C.id===n(),I=f.connectionMode===Qt.Strict?(S==null?void 0:S.type)!==r():c!==(S==null?void 0:S.nodeId)||n()!==(S==null?void 0:S.id);return[!0,M,k,I,k&&v]}),p=x(()=>Rt(l(_),5)),w=x(()=>l(p)[0]),O=x(()=>l(p)[1]),b=x(()=>l(p)[2]),y=x(()=>l(p)[3]),N=x(()=>l(p)[4]);function T(S){var v,M;const C=((v=f.onbeforeconnect)==null?void 0:v.call(f,S))??S;C&&(f.addEdge(C),(M=f.onconnect)==null||M.call(f,S))}function E(S){const C=fa(S);(C&&S.button===0||!C)&&Yi.onPointerDown(S,{handleId:n(),nodeId:c,isTarget:l(u),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:T,onConnectStart:(v,M)=>{var k;(k=f.onconnectstart)==null||k.call(f,v,{nodeId:M.nodeId,handleId:M.handleId,handleType:M.handleType})},onConnectEnd:(v,M)=>{var k;(k=f.onconnectend)==null||k.call(f,v,M)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle})}function D(S){var G,Y;if(!c||!f.clickConnectStartHandle&&!i())return;if(!f.clickConnectStartHandle){(G=f.onclickconnectstart)==null||G.call(f,S,{nodeId:c,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:c,type:r(),id:n()};return}const C=ua(S.target),v=t.isValidConnection??f.isValidConnection,{connectionMode:M,clickConnectStartHandle:k,flowId:I,nodeLookup:H}=f,{connection:z,isValid:F}=Yi.isValid(S,{handle:{nodeId:c,id:n(),type:r()},connectionMode:M,fromNodeId:k.nodeId,fromHandleId:k.id??null,fromType:k.type,isValidConnection:v,flowId:I,doc:C,lib:"svelte",nodeLookup:H});F&&z&&T(z);const L=structuredClone(ys(f.connection));delete L.inProgress,L.toPosition=L.toHandle?L.toHandle.position:null,(Y=f.onclickconnectend)==null||Y.call(f,S,L),f.clickConnectStartHandle=null}var V=Xh(),R=()=>{};$e(V,S=>({"data-handleid":n(),"data-nodeid":c,"data-handlepos":o(),"data-id":`${f.flowId??""}-${c??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${o()}`,f.noDragClass,f.noPanClass,o(),t.class],onmousedown:E,ontouchstart:E,onclick:f.clickConnect?D:void 0,onkeypress:R,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[bt]:S}),[()=>({valid:l(N),connectingto:l(b),connectingfrom:l(O),source:!l(u),target:l(u),connectablestart:i(),connectableend:s(),connectable:l(h),connectionindicator:l(h)&&(!l(w)||l(y))&&(l(w)||f.clickConnectStartHandle?s():i())})]);var W=te(V);xe(W,()=>t.children??Me),j(V),K(e,V),ie()}var Yh=de("<!> <!>",1);function Sa(e,t){oe(t,!0);let n=B(t,"targetPosition",19,()=>se.Top),r=B(t,"sourcePosition",19,()=>se.Bottom);var o=Yh(),i=ce(o);je(i,{type:"target",get position(){return n()}});var s=ee(i),a=ee(s);je(a,{type:"source",get position(){return r()}}),we(()=>{var c;return dt(s,` ${((c=t.data)==null?void 0:c.label)??""} `)}),K(e,o),ie()}var Kh=de(" <!>",1);function qh(e,t){oe(t,!0);let n=B(t,"data",19,()=>({label:"Node"})),r=B(t,"sourcePosition",19,()=>se.Bottom);tn();var o=Kh(),i=ce(o),s=ee(i);je(s,{type:"source",get position(){return r()}}),we(()=>{var a;return dt(i,`${((a=n())==null?void 0:a.label)??""} `)}),K(e,o),ie()}var Zh=de(" <!>",1);function Gh(e,t){oe(t,!0);let n=B(t,"data",19,()=>({label:"Node"})),r=B(t,"targetPosition",19,()=>se.Top);tn();var o=Zh(),i=ce(o),s=ee(i);je(s,{type:"target",get position(){return r()}}),we(()=>{var a;return dt(i,`${((a=n())==null?void 0:a.label)??""} `)}),K(e,o),ie()}function Uh(e,t){}function no(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function ro(e,t){const n=x(Ve),r=x(()=>l(n).domNode);let o;return l(r)?no(e,l(r),t):o=vs(()=>{St(()=>{no(e,l(r),t),o==null||o()})}),{async update(i){no(e,l(r),i)},destroy(){e.parentNode&&e.parentNode.removeChild(e),o==null||o()}}}function Jh(){let e=he(typeof window>"u");if(l(e)){const t=vs(()=>{St(()=>{X(e,!1),t==null||t()})})}return{get value(){return l(e)}}}const qi=e=>Vf(e),Qh=e=>ra(e);function ot(e){return e===void 0?void 0:`${e}px`}const _r={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var jh=de("<div><!></div>");function $h(e,t){oe(t,!0);let n=B(t,"x",3,0),r=B(t,"y",3,0),o=B(t,"selectEdgeOnClick",3,!1),i=B(t,"transparent",3,!1),s=Ee(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Ve(),c=Tt("svelteflow__edge_id");let d=x(()=>{var g;return(g=a.visible.edges.get(c))==null?void 0:g.zIndex});var u=jh(),h=()=>{o()&&c&&a.handleEdgeSelection(c)};$e(u,(g,m,_)=>({class:["svelte-flow__edge-label",{transparent:i()},t.class],tabindex:"-1",onclick:h,...s,[Je]:{display:g,cursor:o()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:m,height:_,"z-index":l(d)}}),[()=>Jh().value?"none":void 0,()=>ot(t.width),()=>ot(t.height)],"svelte-w2n27y");var f=te(u);xe(f,()=>t.children??Me),j(u),Te(u,(g,m)=>ro==null?void 0:ro(g,m),()=>"edge-labels"),K(e,u),ie()}var eg=Se("<path></path>"),tg=Se('<path fill="none"></path><!><!>',1);function Gn(e,t){let n=B(t,"interactionWidth",3,20),r=Ee(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var o=tg(),i=ce(o),s=ee(i);{var a=u=>{var h=eg();$e(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),K(u,h)};ye(s,u=>{n()>0&&u(a)})}var c=ee(s);{var d=u=>{$h(u,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{tn();var g=$a();we(()=>dt(g,t.label)),K(h,g)},$$slots:{default:!0}})};ye(c,u=>{t.label&&u(d)})}we(()=>{re(i,"id",t.id),re(i,"d",t.path),vt(i,0,Ct(["svelte-flow__edge-path",t.class])),re(i,"marker-start",t.markerStart),re(i,"marker-end",t.markerEnd),Ie(i,t.style)}),K(e,o)}function Ea(e,t){oe(t,!0);let n=x(()=>{var a;return ha({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=x(()=>Rt(l(n),3)),o=x(()=>l(r)[0]),i=x(()=>l(r)[1]),s=x(()=>l(r)[2]);Gn(e,{get id(){return t.id},get path(){return l(o)},get labelX(){return l(i)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function ng(e,t){oe(t,!0);let n=x(()=>Ko({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=x(()=>Rt(l(n),3)),o=x(()=>l(r)[0]),i=x(()=>l(r)[1]),s=x(()=>l(r)[2]);Gn(e,{get path(){return l(o)},get labelX(){return l(i)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function rg(e,t){oe(t,!0);let n=x(()=>Yo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=x(()=>Rt(l(n),3)),o=x(()=>l(r)[0]),i=x(()=>l(r)[1]),s=x(()=>l(r)[2]);Gn(e,{get path(){return l(o)},get labelX(){return l(i)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function og(e,t){oe(t,!0);let n=x(()=>Ko({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=x(()=>Rt(l(n),3)),o=x(()=>l(r)[0]),i=x(()=>l(r)[1]),s=x(()=>l(r)[2]);Gn(e,{get path(){return l(o)},get labelX(){return l(i)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}var Ln,Vn;class ig{constructor(t,n){q(this,Ln);q(this,Vn);xn(this,Ln,t),xn(this,Vn,ec(n))}get current(){return A(this,Vn).call(this),A(this,Ln).call(this)}}Ln=new WeakMap,Vn=new WeakMap;const sg=/\(.+\)/,ag=new Set(["all","print","screen","and","or","not","only"]);class lg extends ig{constructor(t,n){let r=sg.test(t)||t.split(/[\s,]+/).some(i=>ag.has(i.trim()))?t:`(${t})`;const o=window.matchMedia(r);super(()=>o.matches,i=>fo(o,"change",i))}}function cg(e,t,n,r){const o=new Map;return Xo(e,{x:0,y:0,width:n,height:r},t,!0).forEach(i=>{o.set(i.id,i)}),o}function Zi(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:o,connectionMode:i,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:c}=e,d=new Map;for(const u of t){const h=r.get(u.source),f=r.get(u.target);if(!h||!f)continue;if(a){const{visibleNodes:_,transform:p,width:w,height:O}=e;if($f({sourceNode:h,targetNode:f,width:w,height:O,transform:p}))_.set(h.id,h),_.set(f.id,f);else continue}const g=o.get(u.id);if(g&&u===g.edge&&h==g.sourceNode&&f==g.targetNode){d.set(u.id,g);continue}const m=sh({id:u.id,sourceNode:h,targetNode:f,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:i,onError:s});m&&d.set(u.id,{...n,...u,...m,zIndex:jf({selected:u.selected,zIndex:u.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:c}),sourceNode:h,targetNode:f,edge:u})}return d}const Ca={input:qh,output:Gh,default:Sa,group:Uh},Ma={straight:rg,smoothstep:ng,default:Ea,step:og};function ug(e,t,n,r,o,i){if(t&&!n&&r&&o){const s=qn(i,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Lr(s,r,o,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function dg(e){var n,r,o,i,s,a,c,d,u,h,f,g,m,_,p,w,O,b,y,N,T,E,D,V,R,W,S,C,v,M,k,I,H,z,F,L,G,Y,Q,U,J,ne,Z,$,ue,ae,le,Pe,ve,Ne,Oe,qe,fe,be,De,ke,_e,Ze,Ge,Re,on,sn,an,ln,cn,un,dn,fn,hn,gn,vn,mn,yn;class t{constructor(){q(this,n,x(()=>e.props.id??"1"));q(this,r,he(null));q(this,o,he(null));q(this,i,he(Pt(e.width??0)));q(this,s,he(Pt(e.height??0)));q(this,a,x(()=>{var Xe;const P=uh(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&P&&((Xe=this.fitViewOptions)!=null&&Xe.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),P}));q(this,c,x(()=>this.panZoom!==null));q(this,d,x(()=>(mh(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Ae(this,"_prevSelectedNodes",[]);Ae(this,"_prevSelectedNodeIds",new Set);q(this,u,x(()=>{const P=this._prevSelectedNodeIds.size,Xe=new Set,wn=this.nodes.filter(Ye=>(Ye.selected&&(Xe.add(Ye.id),this._prevSelectedNodeIds.delete(Ye.id)),Ye.selected));return(P!==Xe.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=wn),this._prevSelectedNodeIds=Xe,this._prevSelectedNodes}));Ae(this,"_prevSelectedEdges",[]);Ae(this,"_prevSelectedEdgeIds",new Set);q(this,h,x(()=>{const P=this._prevSelectedEdgeIds.size,Xe=new Set,wn=this.edges.filter(Ye=>(Ye.selected&&(Xe.add(Ye.id),this._prevSelectedEdgeIds.delete(Ye.id)),Ye.selected));return(P!==Xe.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=wn),this._prevSelectedEdgeIds=Xe,this._prevSelectedEdges}));Ae(this,"selectionChangeHandlers",new Map);Ae(this,"nodeLookup",new Map);Ae(this,"parentLookup",new Map);Ae(this,"connectionLookup",new Map);Ae(this,"edgeLookup",new Map);Ae(this,"_prevVisibleEdges",new Map);q(this,f,x(()=>{const{nodes:P,_edges:Xe,_prevVisibleEdges:wn,nodeLookup:Ye,connectionMode:qa,onerror:Za,onlyRenderVisibleElements:Ga,defaultEdgeOptions:Ua}=this;let Un,Br;const ei={edges:Xe,defaultEdgeOptions:Ua,previousEdges:wn,nodeLookup:Ye,connectionMode:qa,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:Za};if(Ga){const{viewport:Wr,width:ti,height:ni}=this,ri=[Wr.x,Wr.y,Wr.zoom];Un=cg(Ye,ri,ti,ni),Br=Zi({...ei,onlyRenderVisible:!0,visibleNodes:Un,transform:ri,width:ti,height:ni})}else Un=this.nodeLookup,Br=Zi(ei);return{nodes:Un,edges:Br}}));q(this,g,x(()=>e.props.nodesDraggable??!0));q(this,m,x(()=>e.props.nodesConnectable??!0));q(this,_,x(()=>e.props.elementsSelectable??!0));q(this,p,x(()=>e.props.nodesFocusable??!0));q(this,w,x(()=>e.props.edgesFocusable??!0));q(this,O,x(()=>e.props.disableKeyboardA11y??!1));q(this,b,x(()=>e.props.minZoom??.5));q(this,y,x(()=>e.props.maxZoom??2));q(this,N,x(()=>e.props.nodeOrigin??[0,0]));q(this,T,x(()=>e.props.nodeExtent??ko));q(this,E,x(()=>e.props.translateExtent??ko));q(this,D,x(()=>e.props.defaultEdgeOptions??{}));q(this,V,x(()=>e.props.nodeDragThreshold??1));q(this,R,x(()=>e.props.autoPanOnNodeDrag??!0));q(this,W,x(()=>e.props.autoPanOnConnect??!0));q(this,S,x(()=>e.props.autoPanOnNodeFocus??!0));Ae(this,"fitViewQueued",e.props.fitView??!1);Ae(this,"fitViewOptions",e.props.fitViewOptions);Ae(this,"fitViewResolver",null);q(this,C,x(()=>e.props.snapGrid??null));q(this,v,he(!1));q(this,M,he(null));q(this,k,he(!1));q(this,I,he(!1));q(this,H,he(!1));q(this,z,he(!1));q(this,F,he(!1));q(this,L,he(null));q(this,G,he(""));q(this,Y,x(()=>e.props.selectionMode??wr.Partial));q(this,Q,x(()=>({...Ca,...e.props.nodeTypes})));q(this,U,x(()=>({...Ma,...e.props.edgeTypes})));q(this,J,x(()=>e.props.noPanClass??"nopan"));q(this,ne,x(()=>e.props.noDragClass??"nodrag"));q(this,Z,x(()=>e.props.noWheelClass??"nowheel"));q(this,$,x(()=>Uf(e.props.ariaLabelConfig)));q(this,ue,he(Pt(ug(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup))));q(this,ae,he(Pt(So)));q(this,le,x(()=>this._connection.inProgress?{...this._connection,to:Zn(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));q(this,Pe,x(()=>e.props.connectionMode??Qt.Strict));q(this,ve,x(()=>e.props.connectionRadius??20));q(this,Ne,x(()=>e.props.isValidConnection??(()=>!0)));q(this,Oe,x(()=>e.props.selectNodesOnDrag??!0));q(this,qe,x(()=>e.props.defaultMarkerColor??"#b1b1b7"));q(this,fe,x(()=>ah(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));q(this,be,x(()=>e.props.onlyRenderVisibleElements??!1));q(this,De,x(()=>e.props.onflowerror??Kf));q(this,ke,x(()=>e.props.ondelete));q(this,_e,x(()=>e.props.onbeforedelete));q(this,Ze,x(()=>e.props.onbeforeconnect));q(this,Ge,x(()=>e.props.onconnect));q(this,Re,x(()=>e.props.onconnectstart));q(this,on,x(()=>e.props.onconnectend));q(this,sn,x(()=>e.props.onbeforereconnect));q(this,an,x(()=>e.props.onreconnect));q(this,ln,x(()=>e.props.onreconnectstart));q(this,cn,x(()=>e.props.onreconnectend));q(this,un,x(()=>e.props.clickConnect??!0));q(this,dn,x(()=>e.props.onclickconnectstart));q(this,fn,x(()=>e.props.onclickconnectend));q(this,hn,he(null));q(this,gn,x(()=>e.props.onselectiondrag));q(this,vn,x(()=>e.props.onselectiondragstart));q(this,mn,x(()=>e.props.onselectiondragstop));Ae(this,"resolveFitView",async()=>{var P;this.panZoom&&(await Xf({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(P=this.fitViewResolver)==null||P.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Ae(this,"_prefersDark",new lg("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));q(this,yn,x(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return l(A(this,n))}set flowId(P){X(A(this,n),P)}get domNode(){return l(A(this,r))}set domNode(P){X(A(this,r),P,!0)}get panZoom(){return l(A(this,o))}set panZoom(P){X(A(this,o),P,!0)}get width(){return l(A(this,i))}set width(P){X(A(this,i),P,!0)}get height(){return l(A(this,s))}set height(P){X(A(this,s),P,!0)}get nodesInitialized(){return l(A(this,a))}set nodesInitialized(P){X(A(this,a),P)}get viewportInitialized(){return l(A(this,c))}set viewportInitialized(P){X(A(this,c),P)}get _edges(){return l(A(this,d))}set _edges(P){X(A(this,d),P)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(P){e.nodes=P}get edges(){return this._edges}set edges(P){e.edges=P}get selectedNodes(){return l(A(this,u))}set selectedNodes(P){X(A(this,u),P)}get selectedEdges(){return l(A(this,h))}set selectedEdges(P){X(A(this,h),P)}get visible(){return l(A(this,f))}set visible(P){X(A(this,f),P)}get nodesDraggable(){return l(A(this,g))}set nodesDraggable(P){X(A(this,g),P)}get nodesConnectable(){return l(A(this,m))}set nodesConnectable(P){X(A(this,m),P)}get elementsSelectable(){return l(A(this,_))}set elementsSelectable(P){X(A(this,_),P)}get nodesFocusable(){return l(A(this,p))}set nodesFocusable(P){X(A(this,p),P)}get edgesFocusable(){return l(A(this,w))}set edgesFocusable(P){X(A(this,w),P)}get disableKeyboardA11y(){return l(A(this,O))}set disableKeyboardA11y(P){X(A(this,O),P)}get minZoom(){return l(A(this,b))}set minZoom(P){X(A(this,b),P)}get maxZoom(){return l(A(this,y))}set maxZoom(P){X(A(this,y),P)}get nodeOrigin(){return l(A(this,N))}set nodeOrigin(P){X(A(this,N),P)}get nodeExtent(){return l(A(this,T))}set nodeExtent(P){X(A(this,T),P)}get translateExtent(){return l(A(this,E))}set translateExtent(P){X(A(this,E),P)}get defaultEdgeOptions(){return l(A(this,D))}set defaultEdgeOptions(P){X(A(this,D),P)}get nodeDragThreshold(){return l(A(this,V))}set nodeDragThreshold(P){X(A(this,V),P)}get autoPanOnNodeDrag(){return l(A(this,R))}set autoPanOnNodeDrag(P){X(A(this,R),P)}get autoPanOnConnect(){return l(A(this,W))}set autoPanOnConnect(P){X(A(this,W),P)}get autoPanOnNodeFocus(){return l(A(this,S))}set autoPanOnNodeFocus(P){X(A(this,S),P)}get snapGrid(){return l(A(this,C))}set snapGrid(P){X(A(this,C),P)}get dragging(){return l(A(this,v))}set dragging(P){X(A(this,v),P,!0)}get selectionRect(){return l(A(this,M))}set selectionRect(P){X(A(this,M),P,!0)}get selectionKeyPressed(){return l(A(this,k))}set selectionKeyPressed(P){X(A(this,k),P,!0)}get multiselectionKeyPressed(){return l(A(this,I))}set multiselectionKeyPressed(P){X(A(this,I),P,!0)}get deleteKeyPressed(){return l(A(this,H))}set deleteKeyPressed(P){X(A(this,H),P,!0)}get panActivationKeyPressed(){return l(A(this,z))}set panActivationKeyPressed(P){X(A(this,z),P,!0)}get zoomActivationKeyPressed(){return l(A(this,F))}set zoomActivationKeyPressed(P){X(A(this,F),P,!0)}get selectionRectMode(){return l(A(this,L))}set selectionRectMode(P){X(A(this,L),P,!0)}get ariaLiveMessage(){return l(A(this,G))}set ariaLiveMessage(P){X(A(this,G),P,!0)}get selectionMode(){return l(A(this,Y))}set selectionMode(P){X(A(this,Y),P)}get nodeTypes(){return l(A(this,Q))}set nodeTypes(P){X(A(this,Q),P)}get edgeTypes(){return l(A(this,U))}set edgeTypes(P){X(A(this,U),P)}get noPanClass(){return l(A(this,J))}set noPanClass(P){X(A(this,J),P)}get noDragClass(){return l(A(this,ne))}set noDragClass(P){X(A(this,ne),P)}get noWheelClass(){return l(A(this,Z))}set noWheelClass(P){X(A(this,Z),P)}get ariaLabelConfig(){return l(A(this,$))}set ariaLabelConfig(P){X(A(this,$),P)}get _viewport(){return l(A(this,ue))}set _viewport(P){X(A(this,ue),P,!0)}get viewport(){return e.viewport??this._viewport}set viewport(P){e.viewport&&(e.viewport=P),this._viewport=P}get _connection(){return l(A(this,ae))}set _connection(P){X(A(this,ae),P,!0)}get connection(){return l(A(this,le))}set connection(P){X(A(this,le),P)}get connectionMode(){return l(A(this,Pe))}set connectionMode(P){X(A(this,Pe),P)}get connectionRadius(){return l(A(this,ve))}set connectionRadius(P){X(A(this,ve),P)}get isValidConnection(){return l(A(this,Ne))}set isValidConnection(P){X(A(this,Ne),P)}get selectNodesOnDrag(){return l(A(this,Oe))}set selectNodesOnDrag(P){X(A(this,Oe),P)}get defaultMarkerColor(){return l(A(this,qe))}set defaultMarkerColor(P){X(A(this,qe),P)}get markers(){return l(A(this,fe))}set markers(P){X(A(this,fe),P)}get onlyRenderVisibleElements(){return l(A(this,be))}set onlyRenderVisibleElements(P){X(A(this,be),P)}get onerror(){return l(A(this,De))}set onerror(P){X(A(this,De),P)}get ondelete(){return l(A(this,ke))}set ondelete(P){X(A(this,ke),P)}get onbeforedelete(){return l(A(this,_e))}set onbeforedelete(P){X(A(this,_e),P)}get onbeforeconnect(){return l(A(this,Ze))}set onbeforeconnect(P){X(A(this,Ze),P)}get onconnect(){return l(A(this,Ge))}set onconnect(P){X(A(this,Ge),P)}get onconnectstart(){return l(A(this,Re))}set onconnectstart(P){X(A(this,Re),P)}get onconnectend(){return l(A(this,on))}set onconnectend(P){X(A(this,on),P)}get onbeforereconnect(){return l(A(this,sn))}set onbeforereconnect(P){X(A(this,sn),P)}get onreconnect(){return l(A(this,an))}set onreconnect(P){X(A(this,an),P)}get onreconnectstart(){return l(A(this,ln))}set onreconnectstart(P){X(A(this,ln),P)}get onreconnectend(){return l(A(this,cn))}set onreconnectend(P){X(A(this,cn),P)}get clickConnect(){return l(A(this,un))}set clickConnect(P){X(A(this,un),P)}get onclickconnectstart(){return l(A(this,dn))}set onclickconnectstart(P){X(A(this,dn),P)}get onclickconnectend(){return l(A(this,fn))}set onclickconnectend(P){X(A(this,fn),P)}get clickConnectStartHandle(){return l(A(this,hn))}set clickConnectStartHandle(P){X(A(this,hn),P,!0)}get onselectiondrag(){return l(A(this,gn))}set onselectiondrag(P){X(A(this,gn),P)}get onselectiondragstart(){return l(A(this,vn))}set onselectiondragstart(P){X(A(this,vn),P)}get onselectiondragstop(){return l(A(this,mn))}set onselectiondragstop(P){X(A(this,mn),P)}get colorMode(){return l(A(this,yn))}set colorMode(P){X(A(this,yn),P)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=So,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,o=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,b=new WeakMap,y=new WeakMap,N=new WeakMap,T=new WeakMap,E=new WeakMap,D=new WeakMap,V=new WeakMap,R=new WeakMap,W=new WeakMap,S=new WeakMap,C=new WeakMap,v=new WeakMap,M=new WeakMap,k=new WeakMap,I=new WeakMap,H=new WeakMap,z=new WeakMap,F=new WeakMap,L=new WeakMap,G=new WeakMap,Y=new WeakMap,Q=new WeakMap,U=new WeakMap,J=new WeakMap,ne=new WeakMap,Z=new WeakMap,$=new WeakMap,ue=new WeakMap,ae=new WeakMap,le=new WeakMap,Pe=new WeakMap,ve=new WeakMap,Ne=new WeakMap,Oe=new WeakMap,qe=new WeakMap,fe=new WeakMap,be=new WeakMap,De=new WeakMap,ke=new WeakMap,_e=new WeakMap,Ze=new WeakMap,Ge=new WeakMap,Re=new WeakMap,on=new WeakMap,sn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,fn=new WeakMap,hn=new WeakMap,gn=new WeakMap,vn=new WeakMap,mn=new WeakMap,yn=new WeakMap,new t}function Ve(){const e=Tt(kr);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const kr=Symbol();function Pa(e){const t=dg(e);function n(S){t.nodeTypes={...Ca,...S}}function r(S){t.edgeTypes={...Ma,...S}}function o(S){t.edges=nh(S,t.edges)}const i=(S,C=!1)=>{t.nodes=t.nodes.map(v=>{const M=S.get(v.id);return M?{...v,position:M.position,dragging:C}:v})};function s(S){var k,I,H;const{changes:C,updatedInternals:v}=gh(S,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!v)return;ch(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const M=new Map;for(const z of C){const F=(k=t.nodeLookup.get(z.id))==null?void 0:k.internals.userNode;if(!F)continue;const L={...F};switch(z.type){case"dimensions":{const G={...L.measured,...z.dimensions};z.setAttributes&&(L.width=((I=z.dimensions)==null?void 0:I.width)??L.width,L.height=((H=z.dimensions)==null?void 0:H.height)??L.height),L.measured=G;break}case"position":L.position=z.position??L.position;break}M.set(z.id,L)}t.nodes=t.nodes.map(z=>M.get(z.id)??z)}function a(S){const C=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=S,t.fitViewResolver=C,t.nodes=[...t.nodes],C.promise}async function c(S,C,v){const M=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:t.maxZoom,k=t.panZoom;return k?(await k.setViewport({x:t.width/2-S*M,y:t.height/2-C*M,zoom:M},{duration:v==null?void 0:v.duration,ease:v==null?void 0:v.ease,interpolate:v==null?void 0:v.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function d(S,C){const v=t.panZoom;return v?v.scaleBy(S,C):Promise.resolve(!1)}function u(S){return d(1.2,S)}function h(S){return d(1/1.2,S)}function f(S){const C=t.panZoom;C&&(C.setScaleExtent([S,t.maxZoom]),t.minZoom=S)}function g(S){const C=t.panZoom;C&&(C.setScaleExtent([t.minZoom,S]),t.maxZoom=S)}function m(S){const C=t.panZoom;C&&(C.setTranslateExtent(S),t.translateExtent=S)}function _(S){var C;(C=t.panZoom)==null||C.setClickDistance(S)}function p(S,C=null){let v=!1;const M=S.map(k=>(C?C.has(k.id):!0)&&k.selected?(v=!0,{...k,selected:!1}):k);return[v,M]}function w(S){const C=S!=null&&S.nodes?new Set(S.nodes.map(z=>z.id)):null,[v,M]=p(t.nodes,C);v&&(t.nodes=M);const k=S!=null&&S.edges?new Set(S.edges.map(z=>z.id)):null,[I,H]=p(t.edges,k);I&&(t.edges=H)}function O(S){const C=t.multiselectionKeyPressed;t.nodes=t.nodes.map(v=>{const M=S.includes(v.id),k=C&&v.selected||M;if(v.selected!==k){const I=t.nodeLookup.get(v.id);return I&&(I.selected=k),v.selected=k,{...v}}return v}),C||w({nodes:[]})}function b(S){const C=t.multiselectionKeyPressed;t.edges=t.edges.map(v=>{const M=S.includes(v.id),k=C&&v.selected||M;return v.selected!==k?{...v,selected:k}:v}),C||w({edges:[]})}function y(S,C,v){const M=t.nodeLookup.get(S);if(!M){console.warn("012",Tn.error012(S));return}t.selectionRect=null,t.selectionRectMode=null,M.selected?(C||M.selected&&t.multiselectionKeyPressed)&&(w({nodes:[M],edges:[]}),requestAnimationFrame(()=>v==null?void 0:v.blur())):O([S])}function N(S){const C=t.edgeLookup.get(S);if(!C){console.warn("012",Tn.error012(S));return}(C.selectable||t.elementsSelectable&&typeof C.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,C.selected?C.selected&&t.multiselectionKeyPressed&&w({nodes:[],edges:[C]}):b([S]))}function T(S,C){const{nodeExtent:v,snapGrid:M,nodeOrigin:k,nodeLookup:I,nodesDraggable:H,onerror:z}=t,F=new Map,L=(M==null?void 0:M[0])??5,G=(M==null?void 0:M[1])??5,Y=S.x*L*C,Q=S.y*G*C;for(const U of I.values()){if(!(U.selected&&(U.draggable||H&&typeof U.draggable>"u")))continue;let ne={x:U.internals.positionAbsolute.x+Y,y:U.internals.positionAbsolute.y+Q};M&&(ne=Hr(ne,M));const{position:Z,positionAbsolute:$}=oa({nodeId:U.id,nextPosition:ne,nodeLookup:I,nodeExtent:v,nodeOrigin:k,onError:z});U.position=Z,U.internals.positionAbsolute=$,F.set(U.id,U)}i(F)}function E(S){return vh({delta:S,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const D=S=>{t._connection={...S}};function V(){t._connection=So}function R(){t.resetStoreValues(),w()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:o,updateNodePositions:i,updateNodeInternals:s,zoomIn:u,zoomOut:h,fitView:a,setCenter:c,setMinZoom:f,setMaxZoom:g,setTranslateExtent:m,setPaneClickDistance:_,unselectNodesAndEdges:w,addSelectedNodes:O,addSelectedEdges:b,handleNodeSelection:y,handleEdgeSelection:N,moveSelectedNodes:T,panBy:E,updateConnection:D,cancelConnection:V,reset:R})}function oo(e,t){const{minZoom:n,maxZoom:r,initialViewport:o,translateExtent:i,paneClickDistance:s,setPanZoomInstance:a,onDraggingChange:c,onTransformChange:d}=t,u=Ih({domNode:e,minZoom:n,maxZoom:r,translateExtent:i,viewport:o,paneClickDistance:s,onDraggingChange:c}),h=u.getViewport();return(o.x!==h.x||o.y!==h.y||o.zoom!==h.zoom)&&d([h.x,h.y,h.zoom]),a(u),u.update(t),{update(f){u.update(f)}}}var fg=de('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function hg(e,t){oe(t,!0);let n=B(t,"store",15),r=B(t,"panOnScrollMode",19,()=>_t.Free),o=B(t,"preventScrolling",3,!0),i=B(t,"zoomOnScroll",3,!0),s=B(t,"zoomOnDoubleClick",3,!0),a=B(t,"zoomOnPinch",3,!0),c=B(t,"panOnDrag",3,!0),d=B(t,"panOnScroll",3,!1),u=B(t,"paneClickDistance",3,1),h=x(()=>n().panActivationKeyPressed||c()),f=x(()=>n().panActivationKeyPressed||d());const{viewport:g}=n();let m=!1;St(()=>{var w;!m&&n().viewportInitialized&&((w=t.oninit)==null||w.call(t),m=!0)});var _=fg(),p=te(_);xe(p,()=>t.children),j(_),Te(_,(w,O)=>oo==null?void 0:oo(w,O),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:w=>{n(n().dragging=w,!0)},setPanZoomInstance:w=>{n(n().panZoom=w,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:i(),zoomOnDoubleClick:s(),zoomOnPinch:a(),panOnScroll:l(f),panOnDrag:l(h),panOnScrollSpeed:.5,panOnScrollMode:r()||_t.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof o()=="boolean"?o():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:u(),onTransformChange:w=>{n(n().viewport={x:w[0],y:w[1],zoom:w[2]},!0)}})),K(e,_),ie()}function Gi(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Ui(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Ji(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var gg=de("<div><!></div>");function vg(e,t){oe(t,!0);let n=B(t,"store",15),r=B(t,"panOnDrag",3,!0),o,i=null,s=new Set,a=new Set,c=x(()=>n().panActivationKeyPressed||r()),d=x(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&l(c)!==!0),u=x(()=>n().elementsSelectable&&(l(d)||n().selectionRectMode==="user")),h=!1;function f(T){var E;if(h||n().connection.inProgress){h=!1;return}(E=t.onpaneclick)==null||E.call(t,{event:T}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(T){var V,R,W;if(i=o==null?void 0:o.getBoundingClientRect(),!n().elementsSelectable||!l(d)||T.button!==0||T.target!==o||!i)return;(R=(V=T.target)==null?void 0:V.setPointerCapture)==null||R.call(V,T.pointerId);const{x:E,y:D}=ft(T,i);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:E,startY:D,x:E,y:D},!0),(W=t.onselectionstart)==null||W.call(t,T)}function m(T){if(!l(d)||!i||!n().selectionRect)return;h=!0;const E=ft(T,i),{startX:D=0,startY:V=0}=n().selectionRect,R={...n().selectionRect,x:E.x<D?E.x:D,y:E.y<V?E.y:V,width:Math.abs(E.x-D),height:Math.abs(E.y-V)},W=s,S=a;s=new Set(Xo(n().nodeLookup,R,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===wr.Partial,!0).map(v=>v.id));const C=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const v of s){const M=n().connectionLookup.get(v);if(M)for(const{edgeId:k}of M.values()){const I=n().edgeLookup.get(k);I&&(I.selectable??C)&&a.add(k)}}Ji(W,s)||n(n().nodes=n().nodes.map(Ui(s)),!0),Ji(S,a)||n(n().edges=n().edges.map(Ui(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=R,!0)}function _(T){var E,D,V;T.button===0&&((D=(E=T.target)==null?void 0:E.releasePointerCapture)==null||D.call(E,T.pointerId),!l(d)&&n().selectionRectMode==="user"&&T.target===o&&(f==null||f(T)),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),(V=t.onselectionend)==null||V.call(t,T))}const p=T=>{var E;if(Array.isArray(l(c))&&l(c).includes(2)){T.preventDefault();return}(E=t.onpanecontextmenu)==null||E.call(t,{event:T})};var w=gg();let O;var b=x(()=>l(u)?void 0:Gi(f,o));w.__click=function(...T){var E;(E=l(b))==null||E.apply(this,T)},w.__pointerdown=function(...T){var E;(E=l(u)?g:void 0)==null||E.apply(this,T)},w.__pointermove=function(...T){var E;(E=l(u)?m:void 0)==null||E.apply(this,T)},w.__pointerup=function(...T){var E;(E=l(u)?_:void 0)==null||E.apply(this,T)};var y=x(()=>Gi(p,o));w.__contextmenu=function(...T){var E;(E=l(y))==null||E.apply(this,T)};var N=te(w);xe(N,()=>t.children),j(w),Ht(w,T=>o=T,()=>o),we(T=>O=vt(w,1,"svelte-flow__pane svelte-flow__container",null,O,T),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:l(d)})]),K(e,w),ie()}nn(["click","pointerdown","pointermove","pointerup","contextmenu"]);var mg=de('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function yg(e,t){oe(t,!0);var n=mg();let r;var o=te(n);xe(o,()=>t.children),j(n),we(()=>r=Ie(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),K(e,n),ie()}function qt(e,t){const{store:n,onDrag:r,onDragStart:o,onDragStop:i,onNodeMouseDown:s}=t,a=wh({onDrag:r,onDragStart:o,onDragStop:i,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:d,viewport:u}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:d||[0,0],snapToGrid:!!d,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function c(d,u){if(u.disabled){a.destroy();return}a.update({domNode:d,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return c(e,t),{update(d){c(e,d)},destroy(){a.destroy()}}}var wg=de('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-62ze0y"> </div>'),xg=de('<div class="a11y-hidden svelte-62ze0y"> </div> <div class="a11y-hidden svelte-62ze0y"> </div> <!>',1);function bg(e,t){oe(t,!0);var n=xg(),r=ce(n),o=te(r,!0);j(r);var i=ee(r,2),s=te(i,!0);j(i);var a=ee(i,2);{var c=d=>{var u=wg(),h=te(u,!0);j(u),we(()=>{re(u,"id",`${pg}-${t.store.flowId}`),dt(h,t.store.ariaLiveMessage)}),K(d,u)};ye(a,d=>{t.store.disableKeyboardA11y||d(c)})}we(()=>{re(r,"id",`${Aa}-${t.store.flowId}`),dt(o,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),re(i,"id",`${Na}-${t.store.flowId}`),dt(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),K(e,n),ie()}const Aa="svelte-flow__node-desc",Na="svelte-flow__edge-desc",pg="svelte-flow__aria-live";var _g=de("<div><!></div>");function kg(e,t){oe(t,!0);let n=B(t,"store",15),r=x(()=>ze(t.node.data,()=>({}),!0)),o=x(()=>ze(t.node.selected,!1)),i=x(()=>t.node.draggable),s=x(()=>t.node.selectable),a=x(()=>ze(t.node.deletable,!0)),c=x(()=>t.node.connectable),d=x(()=>t.node.focusable),u=x(()=>ze(t.node.hidden,!1)),h=x(()=>ze(t.node.dragging,!1)),f=x(()=>ze(t.node.style,"")),g=x(()=>t.node.class),m=x(()=>ze(t.node.type,"default")),_=x(()=>t.node.parentId),p=x(()=>t.node.sourcePosition),w=x(()=>t.node.targetPosition),O=x(()=>ze(t.node.measured,()=>({width:0,height:0}),!0).width),b=x(()=>ze(t.node.measured,()=>({width:0,height:0}),!0).height),y=x(()=>t.node.initialWidth),N=x(()=>t.node.initialHeight),T=x(()=>t.node.width),E=x(()=>t.node.height),D=x(()=>t.node.dragHandle),V=x(()=>ze(t.node.internals.z,0)),R=x(()=>t.node.internals.positionAbsolute.x),W=x(()=>t.node.internals.positionAbsolute.y),S=x(()=>t.node.internals.userNode),{id:C}=t.node,v=x(()=>l(i)??n().nodesDraggable),M=x(()=>l(s)??n().elementsSelectable),k=x(()=>l(c)??n().nodesConnectable),I=x(()=>la(t.node)),H=x(()=>!!t.node.internals.handleBounds),z=x(()=>l(I)&&l(H)),F=x(()=>l(d)??n().nodesFocusable);function L(fe){return n().parentLookup.has(fe)}let G=x(()=>L(C)),Y=he(null),Q=null,U=l(m),J=l(p),ne=l(w),Z=x(()=>n().nodeTypes[l(m)]??Sa),$=x(()=>n().ariaLabelConfig);Gt("svelteflow__node_connectable",{get value(){return l(k)}}),Gt("svelteflow__node_id",C);let ae=x(()=>{const fe=l(O)===void 0?l(T)??l(y):l(T),be=l(b)===void 0?l(E)??l(N):l(E);if(!(fe===void 0&&be===void 0&&l(f)===void 0))return`${l(f)};${fe?`width:${ot(fe)};`:""}${be?`height:${ot(be)};`:""}`});St(()=>{(l(m)!==U||l(p)!==J||l(w)!==ne)&&l(Y)!==null&&requestAnimationFrame(()=>{l(Y)!==null&&n().updateNodeInternals(new Map([[C,{id:C,nodeElement:l(Y),force:!0}]]))}),U=l(m),J=l(p),ne=l(w)}),St(()=>{t.resizeObserver&&(!l(z)||l(Y)!==Q)&&(Q&&t.resizeObserver.unobserve(Q),l(Y)&&t.resizeObserver.observe(l(Y)),Q=l(Y))}),Wn(()=>{var fe;Q&&((fe=t.resizeObserver)==null||fe.unobserve(Q))});function le(fe){var be;l(M)&&(!n().selectNodesOnDrag||!l(v)||n().nodeDragThreshold>0)&&n().handleNodeSelection(C),(be=t.onnodeclick)==null||be.call(t,{node:l(S),event:fe})}function Pe(fe){if(!(da(fe)||n().disableKeyboardA11y))if(na.includes(fe.key)&&l(M)){const be=fe.key==="Escape";n().handleNodeSelection(C,be,l(Y))}else l(v)&&t.node.selected&&Object.prototype.hasOwnProperty.call(_r,fe.key)&&(fe.preventDefault(),n(n().ariaLiveMessage=l($)["node.a11yDescription.ariaLiveMessage"]({direction:fe.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(_r[fe.key],fe.shiftKey?4:1))}const ve=()=>{var _e;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((_e=l(Y))!=null&&_e.matches(":focus-visible")))return;const{width:fe,height:be,viewport:De}=n();Xo(new Map([[C,t.node]]),{x:0,y:0,width:fe,height:be},[De.x,De.y,De.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:De.zoom})};var Ne=me(),Oe=ce(Ne);{var qe=fe=>{var be=_g();$e(be,ke=>({"data-id":C,class:["svelte-flow__node",`svelte-flow__node-${l(m)}`,l(g)],style:l(ae),onclick:le,onpointerenter:t.onnodepointerenter?_e=>t.onnodepointerenter({node:l(S),event:_e}):void 0,onpointerleave:t.onnodepointerleave?_e=>t.onnodepointerleave({node:l(S),event:_e}):void 0,onpointermove:t.onnodepointermove?_e=>t.onnodepointermove({node:l(S),event:_e}):void 0,oncontextmenu:t.onnodecontextmenu?_e=>t.onnodecontextmenu({node:l(S),event:_e}):void 0,onkeydown:l(F)?Pe:void 0,onfocus:l(F)?ve:void 0,tabIndex:l(F)?0:void 0,role:t.node.ariaRole??(l(F)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${Aa}-${n().flowId}`,...t.node.domAttributes,[bt]:ke,[Je]:{"z-index":l(V),transform:`translate(${l(R)??""}px, ${l(W)??""}px)`,visibility:l(I)?"visible":"hidden"}}),[()=>({dragging:l(h),selected:l(o),draggable:l(v),connectable:l(k),selectable:l(M),nopan:l(v),parent:l(G)})]);var De=te(be);Io(De,()=>l(Z),(ke,_e)=>{_e(ke,{get data(){return l(r)},get id(){return C},get selected(){return l(o)},get selectable(){return l(M)},get deletable(){return l(a)},get sourcePosition(){return l(p)},get targetPosition(){return l(w)},get zIndex(){return l(V)},get dragging(){return l(h)},get draggable(){return l(v)},get dragHandle(){return l(D)},get parentId(){return l(_)},get type(){return l(m)},get isConnectable(){return l(k)},get positionAbsoluteX(){return l(R)},get positionAbsoluteY(){return l(W)},get width(){return l(T)},get height(){return l(E)}})}),j(be),Te(be,(ke,_e)=>qt==null?void 0:qt(ke,_e),()=>({nodeId:C,isSelectable:l(M),disabled:!l(v),handleSelector:l(D),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(ke,_e,Ze,Ge)=>{var Re;(Re=t.onnodedrag)==null||Re.call(t,{event:ke,targetNode:Ze,nodes:Ge})},onDragStart:(ke,_e,Ze,Ge)=>{var Re;(Re=t.onnodedragstart)==null||Re.call(t,{event:ke,targetNode:Ze,nodes:Ge})},onDragStop:(ke,_e,Ze,Ge)=>{var Re;(Re=t.onnodedragstop)==null||Re.call(t,{event:ke,targetNode:Ze,nodes:Ge})},store:n()})),Ht(be,ke=>X(Y,ke),()=>l(Y)),K(fe,be)};ye(Oe,fe=>{l(u)||fe(qe)})}K(e,Ne),ie()}var Sg=de('<div class="svelte-flow__nodes"></div>');function Eg(e,t){oe(t,!0);let n=B(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const s=new Map;i.forEach(a=>{const c=a.target.getAttribute("data-id");s.set(c,{id:c,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});Wn(()=>{r==null||r.disconnect()});var o=Sg();Et(o,21,()=>n().visible.nodes.values(),i=>i.id,(i,s)=>{kg(i,{get node(){return l(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),j(o),K(e,o),ie()}var Cg=Se('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Mg(e,t){oe(t,!0);let n=x(()=>t.edge.source),r=x(()=>t.edge.target),o=x(()=>t.edge.sourceX),i=x(()=>t.edge.sourceY),s=x(()=>t.edge.targetX),a=x(()=>t.edge.targetY),c=x(()=>t.edge.sourcePosition),d=x(()=>t.edge.targetPosition),u=x(()=>ze(t.edge.animated,!1)),h=x(()=>ze(t.edge.selected,!1)),f=x(()=>t.edge.label),g=x(()=>t.edge.labelStyle),m=x(()=>ze(t.edge.data,()=>({}),!0)),_=x(()=>t.edge.style),p=x(()=>t.edge.interactionWidth),w=x(()=>ze(t.edge.type,"default")),O=x(()=>t.edge.sourceHandle),b=x(()=>t.edge.targetHandle),y=x(()=>t.edge.markerStart),N=x(()=>t.edge.markerEnd),T=x(()=>t.edge.selectable),E=x(()=>t.edge.focusable),D=x(()=>ze(t.edge.deletable,!0)),V=x(()=>t.edge.hidden),R=x(()=>t.edge.zIndex),W=x(()=>t.edge.class),S=x(()=>t.edge.ariaLabel),C=null;const{id:v}=t.edge;Gt("svelteflow__edge_id",v);let M=x(()=>l(T)??t.store.elementsSelectable),k=x(()=>l(E)??t.store.edgesFocusable),I=x(()=>t.store.edgeTypes[l(w)]??Ea),H=x(()=>l(y)?`url('#${Co(l(y),t.store.flowId)}')`:void 0),z=x(()=>l(N)?`url('#${Co(l(N),t.store.flowId)}')`:void 0);function F(J){var Z;const ne=t.store.edgeLookup.get(v);ne&&(l(M)&&t.store.handleEdgeSelection(v),(Z=t.onedgeclick)==null||Z.call(t,{event:J,edge:ne}))}function L(J,ne){const Z=t.store.edgeLookup.get(v);Z&&ne({event:J,edge:Z})}function G(J){if(!t.store.disableKeyboardA11y&&na.includes(J.key)&&l(M)){const{unselectNodesAndEdges:ne,addSelectedEdges:Z}=t.store;J.key==="Escape"?(C==null||C.blur(),ne({edges:[t.edge]})):Z([v])}}var Y=me(),Q=ce(Y);{var U=J=>{var ne=Cg();let Z;var $=te(ne);$e($,ae=>({class:["svelte-flow__edge",l(W)],"data-id":v,onclick:F,oncontextmenu:t.onedgecontextmenu?le=>{L(le,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?le=>{L(le,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?le=>{L(le,t.onedgepointerleave)}:void 0,"aria-label":l(S)===null?void 0:l(S)?l(S):`Edge from ${l(n)} to ${l(r)}`,"aria-describedby":l(k)?`${Na}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(k)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(k)?G:void 0,tabindex:l(k)?0:void 0,...t.edge.domAttributes,[bt]:ae}),[()=>({animated:l(u),selected:l(h),selectable:l(M)})]);var ue=te($);Io(ue,()=>l(I),(ae,le)=>{le(ae,{get id(){return v},get source(){return l(n)},get target(){return l(r)},get sourceX(){return l(o)},get sourceY(){return l(i)},get targetX(){return l(s)},get targetY(){return l(a)},get sourcePosition(){return l(c)},get targetPosition(){return l(d)},get animated(){return l(u)},get selected(){return l(h)},get label(){return l(f)},get labelStyle(){return l(g)},get data(){return l(m)},get style(){return l(_)},get interactionWidth(){return l(p)},get selectable(){return l(M)},get deletable(){return l(D)},get type(){return l(w)},get sourceHandleId(){return l(O)},get targetHandleId(){return l(b)},get markerStart(){return l(H)},get markerEnd(){return l(z)}})}),j($),Ht($,ae=>C=ae,()=>C),j(ne),we(()=>Z=Ie(ne,"",Z,{"z-index":l(R)})),K(J,ne)};ye(Q,J=>{l(V)||J(U)})}K(e,Y),ie()}var Pg=Se("<defs></defs>");function Ag(e,t){oe(t,!1);const n=Ve();el();var r=Pg();Et(r,5,()=>n.markers,o=>o.id,(o,i)=>{Ig(o,Ce(()=>l(i)))}),j(r),K(e,r),ie()}var Ng=Se('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),zg=Se('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Tg=Se('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Ig(e,t){oe(t,!0);let n=B(t,"width",3,12.5),r=B(t,"height",3,12.5),o=B(t,"markerUnits",3,"strokeWidth"),i=B(t,"orient",3,"auto-start-reverse");var s=Tg(),a=te(s);{var c=u=>{var h=Ng();we(()=>{re(h,"stroke",t.color),re(h,"stroke-width",t.strokeWidth)}),K(u,h)},d=(u,h)=>{{var f=g=>{var m=zg();we(()=>{re(m,"stroke",t.color),re(m,"stroke-width",t.strokeWidth),re(m,"fill",t.color)}),K(g,m)};ye(u,g=>{t.type===In.ArrowClosed&&g(f)},h)}};ye(a,u=>{t.type===In.Arrow?u(c):u(d,!1)})}j(s),we(()=>{re(s,"id",t.id),re(s,"markerWidth",`${n()}`),re(s,"markerHeight",`${r()}`),re(s,"markerUnits",o()),re(s,"orient",i())}),K(e,s),ie()}var Og=de('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Dg(e,t){oe(t,!0);let n=B(t,"store",15);var r=Og(),o=te(r),i=te(o);Ag(i,{}),j(o);var s=ee(o,2);Et(s,17,()=>n().visible.edges.values(),a=>a.id,(a,c)=>{Mg(a,{get edge(){return l(c)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(d){n(d)}})}),j(r),K(e,r),ie()}var Rg=de('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function za(e,t){oe(t,!0);let n=B(t,"x",3,0),r=B(t,"y",3,0),o=B(t,"width",3,0),i=B(t,"height",3,0),s=B(t,"isVisible",3,!0);var a=me(),c=ce(a);{var d=u=>{var h=Rg();let f;we((g,m)=>f=Ie(h,"",f,{width:g,height:m,transform:`translate(${n()}px, ${r()}px)`}),[()=>typeof o()=="string"?o():ot(o()),()=>typeof i()=="string"?i():ot(i())]),K(u,h)};ye(c,u=>{s()&&u(d)})}K(e,a),ie()}function Hg(e,t){var r;const n=t.store.nodes.filter(o=>o.selected);(r=t.onselectioncontextmenu)==null||r.call(t,{nodes:n,event:e})}function Lg(e,t){var r;const n=t.store.nodes.filter(o=>o.selected);(r=t.onselectionclick)==null||r.call(t,{nodes:n,event:e})}var Vg=de("<div><!></div>");function Fg(e,t){oe(t,!0);let n=he(void 0);St(()=>{var c;t.store.disableKeyboardA11y||(c=l(n))==null||c.focus({preventScroll:!0})});let r=x(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,qn(t.store.nodeLookup,{filter:c=>!!c.selected})):null);function o(c){Object.prototype.hasOwnProperty.call(_r,c.key)&&(c.preventDefault(),t.store.moveSelectedNodes(_r[c.key],c.shiftKey?4:1))}var i=me(),s=ce(i);{var a=c=>{var d=Vg();d.__contextmenu=[Hg,t],d.__click=[Lg,t],d.__keydown=function(...f){var g;(g=t.store.disableKeyboardA11y?void 0:o)==null||g.apply(this,f)};let u;var h=te(d);za(h,{width:"100%",height:"100%",x:0,y:0}),j(d),Te(d,(f,g)=>qt==null?void 0:qt(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,m,_)=>{var p;(p=t.onnodedrag)==null||p.call(t,{event:f,targetNode:null,nodes:_})},onDragStart:(f,g,m,_)=>{var p;(p=t.onnodedragstart)==null||p.call(t,{event:f,targetNode:null,nodes:_})},onDragStop:(f,g,m,_)=>{var p;(p=t.onnodedragstop)==null||p.call(t,{event:f,targetNode:null,nodes:_})}})),Ht(d,f=>X(n,f),()=>l(n)),we((f,g)=>{vt(d,1,Ct(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),re(d,"role",t.store.disableKeyboardA11y?void 0:"button"),re(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),u=Ie(d,"",u,{width:f,height:g,transform:`translate(${l(r).x??""}px, ${l(r).y??""}px)`})},[()=>ot(l(r).width),()=>ot(l(r).height)]),K(c,d)};ye(s,c=>{t.store.selectionRectMode==="nodes"&&l(r)&&ut(l(r).x)&&ut(l(r).y)&&c(a)})}K(e,i),ie()}nn(["contextmenu","click","keydown"]);function Bg(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function ge(e,t){let{enabled:n=!0,trigger:r,type:o="keydown"}=t;function i(a){var u;const c=Array.isArray(r)?r:[r],d=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of c){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:m,callback:_,preventDefault:p,enabled:w}=f;if(w){if(a.key!==m)continue;if(g===null||g===!1){if(d!==0)continue}else if(g!==void 0&&((u=g==null?void 0:g[0])==null?void 0:u.length)>0){const b=Array.isArray(g)?g:[g];let y=!1;for(const N of b)if((Array.isArray(N)?N:[N]).reduce((E,D)=>E|Bg(D),0)===d){y=!0;break}if(!y)continue}p&&a.preventDefault();const O={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:O})),_==null||_(O)}}}let s;return n&&(s=fo(e,o,i)),{update:a=>{const{enabled:c=!0,type:d="keydown"}=a;n&&(!c||o!==d)?s==null||s():!n&&c&&(s=fo(e,d,i)),n=c,o=d,r=a.trigger},destroy:()=>{s==null||s()}}}function rn(){const e=x(Ve),t=i=>{var d,u;const s=qi(i)?i:l(e).nodeLookup.get(i.id),a=s.parentId?Gf(s.position,s.measured,s.parentId,l(e).nodeLookup,l(e).nodeOrigin):s.position,c={...s,position:a,width:((d=s.measured)==null?void 0:d.width)??s.width,height:((u=s.measured)==null?void 0:u.height)??s.height};return $t(c)};function n(i,s,a={replace:!1}){l(e).nodes=nt(()=>l(e).nodes).map(c=>{if(c.id===i){const d=typeof s=="function"?s(c):s;return a!=null&&a.replace&&qi(d)?d:{...c,...d}}return c})}function r(i,s,a={replace:!1}){l(e).edges=nt(()=>l(e).edges).map(c=>{if(c.id===i){const d=typeof s=="function"?s(c):s;return a.replace&&Qh(d)?d:{...c,...d}}return c})}const o=i=>l(e).nodeLookup.get(i);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:o,getNode:i=>{var s;return(s=o(i))==null?void 0:s.internals.userNode},getNodes:i=>i===void 0?l(e).nodes:Qi(l(e).nodeLookup,i),getEdge:i=>l(e).edgeLookup.get(i),getEdges:i=>i===void 0?l(e).edges:Qi(l(e).edgeLookup,i),setZoom:(i,s)=>{const a=l(e).panZoom;return a?a.scaleTo(i,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(i,s)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:i.x??a.x,y:i.y??a.y,zoom:i.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>ys(l(e).viewport),setCenter:async(i,s,a)=>l(e).setCenter(i,s,a),fitView:i=>l(e).fitView(i),fitBounds:async(i,s)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Lr(i,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,(s==null?void 0:s.padding)??.1);return await l(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(i,s=!0,a)=>{const c=Oi(i),d=c?i:t(i);return d?(a||l(e).nodes).filter(u=>{const h=l(e).nodeLookup.get(u.id);if(!h||!c&&u.id===i.id)return!1;const f=$t(h),g=On(f,d);return s&&g>0||g>=d.width*d.height}):[]},isNodeIntersecting:(i,s,a=!0)=>{const d=Oi(i)?i:t(i);if(!d)return!1;const u=On(d,s);return a&&u>0||u>=d.width*d.height},deleteElements:async({nodes:i=[],edges:s=[]})=>{const{nodes:a,edges:c}=await Yf({nodesToRemove:i,edgesToRemove:s,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=nt(()=>l(e).nodes).filter(d=>!a.some(({id:u})=>u===d.id))),c&&(l(e).edges=nt(()=>l(e).edges).filter(d=>!c.some(({id:u})=>u===d.id))),{deletedNodes:a,deletedEdges:c}},screenToFlowPosition:(i,s={snapToGrid:!0})=>{if(!l(e).domNode)return i;const a=s.snapToGrid?l(e).snapGrid:!1,{x:c,y:d,zoom:u}=l(e).viewport,{x:h,y:f}=l(e).domNode.getBoundingClientRect(),g={x:i.x-h,y:i.y-f};return Zn(g,[c,d,u],a!==null,a||[1,1])},flowToScreenPosition:i=>{if(!l(e).domNode)return i;const{x:s,y:a,zoom:c}=l(e).viewport,{x:d,y:u}=l(e).domNode.getBoundingClientRect(),h=br(i,[s,a,c]);return{x:h.x+d,y:h.y+u}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(i,s,a)=>{var u;const c=(u=l(e).nodeLookup.get(i))==null?void 0:u.internals.userNode;if(!c)return;const d=typeof s=="function"?s(c):s;n(i,h=>({...h,data:a!=null&&a.replace?d:{...h.data,...d}}))},updateEdge:r,getNodesBounds:i=>Ff(i,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:i,id:s,nodeId:a})=>{var c;return Array.from(((c=l(e).connectionLookup.get(`${a}-${i}-${s??null}`))==null?void 0:c.values())??[])}}}function Qi(e,t){var r;const n=[];for(const o of t){const i=e.get(o);if(i){const s="internals"in i?(r=i.internals)==null?void 0:r.userNode:i;n.push(s)}}return n}function Wg(e,t){oe(t,!0);let n=B(t,"store",15),r=B(t,"selectionKey",3,"Shift"),o=B(t,"multiSelectionKey",19,()=>pr()?"Meta":"Control"),i=B(t,"deleteKey",3,"Backspace"),s=B(t,"panActivationKey",3," "),a=B(t,"zoomActivationKey",19,()=>pr()?"Meta":"Control"),{deleteElements:c}=rn();function d(_){return _!==null&&typeof _=="object"}function u(_){return d(_)?_.modifier||[]:[]}function h(_){return _==null?"":d(_)?_.key:_}function f(_,p){return(Array.isArray(_)?_:[_]).map(O=>{const b=h(O);return{key:b,modifier:u(O),enabled:b!==null,callback:p}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function m(){var b,y;const _=n().nodes.filter(N=>N.selected),p=n().edges.filter(N=>N.selected),{deletedNodes:w,deletedEdges:O}=await c({nodes:_,edges:p});(w.length>0||O.length>0)&&((y=(b=n()).ondelete)==null||y.call(b,{nodes:w,edges:O}))}Bt("blur",Ke,g),Bt("contextmenu",Ke,g),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(o(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(o(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(i(),_=>{!(_.originalEvent.ctrlKey||_.originalEvent.metaKey||_.originalEvent.shiftKey)&&!da(_.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),m())}),type:"keydown"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(i(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Te(Ke,(_,p)=>ge==null?void 0:ge(_,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ie()}var Xg=Se('<path fill="none" class="svelte-flow__connection-path"></path>'),Yg=Se('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function Kg(e,t){oe(t,!0);let n=x(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case lt.Bezier:{const[a]=ha(s);return a}case lt.Straight:{const[a]=Yo(s);return a}case lt.Step:case lt.SmoothStep:{const[a]=Ko({...s,borderRadius:t.type===lt.Step?0:void 0});return a}}});var r=me(),o=ce(r);{var i=s=>{var a=Yg(),c=te(a),d=te(c);{var u=f=>{var g=me(),m=ce(g);Io(m,()=>t.LineComponent,(_,p)=>{p(_,{})}),K(f,g)},h=f=>{var g=Xg();we(()=>{re(g,"d",l(n)),Ie(g,t.style)}),K(f,g)};ye(d,f=>{t.LineComponent?f(u):f(h,!1)})}j(c),j(a),we(f=>{re(a,"width",t.store.width),re(a,"height",t.store.height),Ie(a,t.containerStyle),vt(c,0,f)},[()=>Ct(["svelte-flow__connection",Lf(t.store.connection.isValid)])]),K(s,a)};ye(o,s=>{t.store.connection.inProgress&&s(i)})}K(e,r),ie()}var qg=de("<div><!></div>");function Uo(e,t){oe(t,!0);let n=B(t,"position",3,"top-right"),r=Ee(t,["$$slots","$$events","$$legacy","position","style","class","children"]),o=x(Ve),i=x(()=>`${n()}`.split("-"));var s=qg();$e(s,c=>({class:c,style:t.style,...r,[Je]:{"pointer-events":l(o).selectionRectMode?"none":""}}),[()=>["svelte-flow__panel",t.class,...l(i)]]);var a=te(s);xe(a,()=>t.children??Me),j(s),K(e,s),ie()}var Zg=de('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Gg(e,t){oe(t,!0);let n=B(t,"position",3,"bottom-right");var r=me(),o=ce(r);{var i=s=>{Uo(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,c)=>{var d=Zg();K(a,d)},$$slots:{default:!0}})};ye(o,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(i)})}K(e,r),ie()}var Ug=de("<div><!></div>");function Jg(e,t){oe(t,!0);let n=B(t,"domNode",15),r=B(t,"clientWidth",15),o=B(t,"clientHeight",15),i=x(()=>t.rest.class),s=x(()=>Al(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","style","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig"]));function a(u){u.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(u)}var c=Ug();$e(c,(u,h)=>({class:["svelte-flow","svelte-flow__container",l(i),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(s),[Je]:{width:u,height:h}}),[()=>ot(t.width),()=>ot(t.height)],"svelte-12wlba6");var d=te(c);xe(d,()=>t.children??Me),j(c),Ht(c,u=>n(u),()=>n()),hi(c,"clientHeight",o),hi(c,"clientWidth",r),K(e,c),ie()}var Qg=de('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),jg=de("<!> <!>",1),$g=de("<!> <!> <!> <!> <!>",1);function e0(e,t){oe(t,!0);let n=B(t,"paneClickDistance",3,1),r=B(t,"nodeClickDistance",3,1),o=B(t,"panOnScrollMode",19,()=>_t.Free),i=B(t,"preventScrolling",3,!0),s=B(t,"zoomOnScroll",3,!0),a=B(t,"zoomOnDoubleClick",3,!0),c=B(t,"zoomOnPinch",3,!0),d=B(t,"panOnScroll",3,!1),u=B(t,"panOnDrag",3,!0),h=B(t,"selectionOnDrag",3,!0),f=B(t,"connectionLineType",19,()=>lt.Bezier),g=B(t,"nodes",31,()=>Pt([])),m=B(t,"edges",31,()=>Pt([])),_=B(t,"viewport",15,void 0),p=Ee(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),w=Pa({props:p,width:t.width,height:t.height,get nodes(){return g()},set nodes(b){g(b)},get edges(){return m()},set edges(b){m(b)},get viewport(){return _()},set viewport(b){_(b)}});const O=Tt(kr);O&&O.setStore&&O.setStore(w),Gt(kr,{provider:!1,getStore(){return w}}),St(()=>{var y;const b={nodes:w.selectedNodes,edges:w.selectedEdges};(y=nt(()=>t.onselectionchange))==null||y(b);for(const N of w.selectionChangeHandlers.values())N(b)}),Wn(()=>{w.reset()}),Jg(e,{get colorMode(){return w.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return p},get domNode(){return w.domNode},set domNode(b){w.domNode=b},get clientWidth(){return w.width},set clientWidth(b){w.width=b},get clientHeight(){return w.height},set clientHeight(b){w.height=b},children:(b,y)=>{var N=$g(),T=ce(N);Wg(T,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return w},set store(W){w=W}});var E=ee(T,2);hg(E,{get panOnScrollMode(){return o()},get preventScrolling(){return i()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return c()},get panOnScroll(){return d()},get panOnDrag(){return u()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return w},set store(W){w=W},children:(W,S)=>{vg(W,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return u()},get selectionOnDrag(){return h()},get store(){return w},set store(C){w=C},children:(C,v)=>{var M=jg(),k=ce(M);yg(k,{get store(){return w},set store(Y){w=Y},children:(Y,Q)=>{var U=Qg(),J=ee(ce(U),2);Dg(J,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return w},set store(ue){w=ue}});var ne=ee(J,4);Kg(ne,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return w},set store(ue){w=ue}});var Z=ee(ne,2);Eg(Z,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(ue){w=ue}});var $=ee(Z,2);Fg($,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(ue){w=ue}}),tn(2),K(Y,U)},$$slots:{default:!0}});var I=ee(k,2);const H=x(()=>!!(w.selectionRect&&w.selectionRectMode==="user")),z=x(()=>{var Y;return(Y=w.selectionRect)==null?void 0:Y.width}),F=x(()=>{var Y;return(Y=w.selectionRect)==null?void 0:Y.height}),L=x(()=>{var Y;return(Y=w.selectionRect)==null?void 0:Y.x}),G=x(()=>{var Y;return(Y=w.selectionRect)==null?void 0:Y.y});za(I,{get isVisible(){return l(H)},get width(){return l(z)},get height(){return l(F)},get x(){return l(L)},get y(){return l(G)}}),K(C,M)},$$slots:{default:!0}})},$$slots:{default:!0}});var D=ee(E,2);Gg(D,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var V=ee(D,2);bg(V,{get store(){return w}});var R=ee(V,2);xe(R,()=>t.children??Me),K(b,N)},$$slots:{default:!0}}),ie()}function t0(e,t){oe(t,!0);let n=he(Pa({props:{},nodes:[],edges:[]}));Gt(kr,{provider:!0,getStore(){return l(n)},setStore:i=>{X(n,i)}}),Wn(()=>{l(n).reset()});var r=me(),o=ce(r);xe(o,()=>t.children??Me),K(e,r),ie()}var n0=de("<button><!></button>");function rr(e,t){let n=Ee(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=n0();$e(r,()=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[Je]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}}));var o=te(r);xe(o,()=>t.children??Me),j(r),K(e,r)}var r0=Se('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function o0(e){var t=r0();K(e,t)}var i0=Se('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function s0(e){var t=i0();K(e,t)}var a0=Se('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function l0(e){var t=a0();K(e,t)}var c0=Se('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function u0(e){var t=c0();K(e,t)}var d0=Se('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function f0(e){var t=d0();K(e,t)}var h0=de("<!> <!>",1),g0=de("<!> <!> <!> <!> <!> <!>",1);function v0(e,t){oe(t,!0);let n=B(t,"position",3,"bottom-left"),r=B(t,"orientation",3,"vertical"),o=B(t,"showZoom",3,!0),i=B(t,"showFitView",3,!0),s=B(t,"showLock",3,!0),a=Ee(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),c=x(Ve);const d={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let u=x(()=>l(c).nodesDraggable||l(c).nodesConnectable||l(c).elementsSelectable),h=x(()=>l(c).viewport.zoom<=l(c).minZoom),f=x(()=>l(c).viewport.zoom>=l(c).maxZoom),g=x(()=>l(c).ariaLabelConfig),m=x(()=>r()==="horizontal"?"horizontal":"vertical");const _=()=>{l(c).zoomIn()},p=()=>{l(c).zoomOut()},w=()=>{l(c).fitView(t.fitViewOptions)},O=()=>{let y=!l(u);l(c).nodesDraggable=y,l(c).nodesConnectable=y,l(c).elementsSelectable=y},b=x(()=>["svelte-flow__controls",l(m),t.class]);Uo(e,Ce({get class(){return l(b)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return l(g)["controls.ariaLabel"]},get style(){return t.style}},()=>a,{children:(y,N)=>{var T=g0(),E=ce(T);{var D=z=>{var F=me(),L=ce(F);xe(L,()=>t.before),K(z,F)};ye(E,z=>{t.before&&z(D)})}var V=ee(E,2);{var R=z=>{var F=h0(),L=ce(F);rr(L,Ce({onclick:_,class:"svelte-flow__controls-zoomin",get title(){return l(g)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomIn.ariaLabel"]},get disabled(){return l(f)}},()=>d,{children:(Y,Q)=>{o0(Y)},$$slots:{default:!0}}));var G=ee(L,2);rr(G,Ce({onclick:p,class:"svelte-flow__controls-zoomout",get title(){return l(g)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomOut.ariaLabel"]},get disabled(){return l(h)}},()=>d,{children:(Y,Q)=>{s0(Y)},$$slots:{default:!0}})),K(z,F)};ye(V,z=>{o()&&z(R)})}var W=ee(V,2);{var S=z=>{rr(z,Ce({class:"svelte-flow__controls-fitview",onclick:w,get title(){return l(g)["controls.fitView.ariaLabel"]},get"aria-label"(){return l(g)["controls.fitView.ariaLabel"]}},()=>d,{children:(F,L)=>{l0(F)},$$slots:{default:!0}}))};ye(W,z=>{i()&&z(S)})}var C=ee(W,2);{var v=z=>{rr(z,Ce({class:"svelte-flow__controls-interactive",onclick:O,get title(){return l(g)["controls.interactive.ariaLabel"]},get"aria-label"(){return l(g)["controls.interactive.ariaLabel"]}},()=>d,{children:(F,L)=>{var G=me(),Y=ce(G);{var Q=J=>{f0(J)},U=J=>{u0(J)};ye(Y,J=>{l(u)?J(Q):J(U,!1)})}K(F,G)},$$slots:{default:!0}}))};ye(C,z=>{s()&&z(v)})}var M=ee(C,2);{var k=z=>{var F=me(),L=ce(F);xe(L,()=>t.children),K(z,F)};ye(M,z=>{t.children&&z(k)})}var I=ee(M,2);{var H=z=>{var F=me(),L=ce(F);xe(L,()=>t.after),K(z,F)};ye(I,z=>{t.after&&z(H)})}K(y,T)},$$slots:{default:!0}})),ie()}var ht;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ht||(ht={}));var m0=Se("<circle></circle>");function y0(e,t){var n=m0();we(()=>{re(n,"cx",t.radius),re(n,"cy",t.radius),re(n,"r",t.radius),vt(n,0,Ct(["svelte-flow__background-pattern","dots",t.class]))}),K(e,n)}var w0=Se("<path></path>");function x0(e,t){oe(t,!0);var n=w0();we(()=>{re(n,"stroke-width",t.lineWidth),re(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),vt(n,0,Ct(["svelte-flow__background-pattern",t.variant,t.class]))}),K(e,n),ie()}const b0={[ht.Dots]:1,[ht.Lines]:1,[ht.Cross]:6};var p0=Se('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function _0(e,t){oe(t,!0);let n=B(t,"variant",19,()=>ht.Dots),r=B(t,"gap",3,20),o=B(t,"lineWidth",3,1),i=x(Ve),s=x(()=>n()===ht.Dots),a=x(()=>n()===ht.Cross),c=x(()=>Array.isArray(r())?r():[r(),r()]),d=x(()=>`background-pattern-${l(i).flowId}-${t.id??""}`),u=x(()=>[l(c)[0]*l(i).viewport.zoom||1,l(c)[1]*l(i).viewport.zoom||1]),h=x(()=>(t.size??b0[n()])*l(i).viewport.zoom),f=x(()=>l(a)?[l(h),l(h)]:l(u)),g=x(()=>l(s)?[l(h)/2,l(h)/2]:[l(f)[0]/2,l(f)[1]/2]);var m=p0();let _;var p=te(m),w=te(p);{var O=N=>{const T=x(()=>l(h)/2);y0(N,{get radius(){return l(T)},get class(){return t.patternClass}})},b=N=>{x0(N,{get dimensions(){return l(f)},get variant(){return n()},get lineWidth(){return o()},get class(){return t.patternClass}})};ye(w,N=>{l(s)?N(O):N(b,!1)})}j(p);var y=ee(p);j(m),we(()=>{vt(m,0,Ct(["svelte-flow__background","svelte-flow__container",t.class])),_=Ie(m,"",_,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),re(p,"id",l(d)),re(p,"x",l(i).viewport.x%l(u)[0]),re(p,"y",l(i).viewport.y%l(u)[1]),re(p,"width",l(u)[0]),re(p,"height",l(u)[1]),re(p,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),re(y,"fill",`url(#${l(d)})`)}),K(e,m),ie()}var k0=Se("<rect></rect>");function S0(e,t){let n=B(t,"borderRadius",3,5),r=B(t,"strokeWidth",3,2);var o=k0();let i,s;we(a=>{i=vt(o,0,Ct(["svelte-flow__minimap-node",t.class]),null,i,a),re(o,"x",t.x),re(o,"y",t.y),re(o,"rx",n()),re(o,"ry",n()),re(o,"width",t.width),re(o,"height",t.height),re(o,"shape-rendering",t.shapeRendering),s=Ie(o,"",s,{fill:t.color,stroke:t.strokeColor,"stroke-width":r()})},[()=>({selected:t.selected})]),K(e,o)}function io(e,t){const n=Sh({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:o}=t.store;return[o.x,o.y,o.zoom]},getViewScale:t.getViewScale});n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable});function r(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:r,destroy(){n.destroy()}}}const so=e=>e instanceof Function?e:()=>e;var E0=Se("<title> </title>"),C0=Se('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),M0=de('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function P0(e,t){oe(t,!0);let n=B(t,"position",3,"bottom-right"),r=B(t,"nodeStrokeColor",3,"transparent"),o=B(t,"nodeClass",3,""),i=B(t,"nodeBorderRadius",3,5),s=B(t,"nodeStrokeWidth",3,2),a=B(t,"width",3,200),c=B(t,"height",3,150),d=B(t,"pannable",3,!0),u=B(t,"zoomable",3,!0),h=Ee(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),f=x(Ve),g=x(()=>l(f).ariaLabelConfig);const m=t.nodeColor===void 0?void 0:so(t.nodeColor),_=so(r()),p=so(o()),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let O=x(()=>`svelte-flow__minimap-desc-${l(f).flowId}`),b=x(()=>({x:-l(f).viewport.x/l(f).viewport.zoom,y:-l(f).viewport.y/l(f).viewport.zoom,width:l(f).width/l(f).viewport.zoom,height:l(f).height/l(f).viewport.zoom})),y=x(()=>l(f).nodeLookup.size>0?aa(qn(l(f).nodeLookup,{filter:z=>!z.hidden}),l(b)):l(b)),N=x(()=>l(y).width/a()),T=x(()=>l(y).height/c()),E=x(()=>Math.max(l(N),l(T))),D=x(()=>l(E)*a()),V=x(()=>l(E)*c()),R=x(()=>5*l(E)),W=x(()=>l(y).x-(l(D)-l(y).width)/2-l(R)),S=x(()=>l(y).y-(l(V)-l(y).height)/2-l(R)),C=x(()=>l(D)+l(R)*2),v=x(()=>l(V)+l(R)*2);const M=()=>l(E);var k=M0(),I=ce(k);const H=x(()=>["svelte-flow__minimap",t.class]);Vl(I,()=>({"--xy-minimap-background-color-props":t.bgColor})),Uo(I.lastChild,Ce({get position(){return n()},get class(){return l(H)},"data-testid":"svelte-flow__minimap"},()=>h,{children:(z,F)=>{var L=me(),G=ce(L);{var Y=Q=>{var U=C0();let J;var ne=te(U);{var Z=ae=>{var le=E0(),Pe=te(le,!0);j(le),we(()=>{re(le,"id",l(O)),dt(Pe,t.ariaLabel??l(g)["minimap.ariaLabel"])}),K(ae,le)};ye(ne,ae=>{(t.ariaLabel??l(g)["minimap.ariaLabel"])&&ae(Z)})}var $=ee(ne);Et($,17,()=>l(f).nodes,ae=>ae.id,(ae,le)=>{var Pe=me();const ve=x(()=>l(f).nodeLookup.get(l(le).id));var Ne=ce(Pe);{var Oe=qe=>{const fe=x(()=>Mt(l(ve))),be=x(()=>m==null?void 0:m(l(ve))),De=x(()=>_(l(ve))),ke=x(()=>p(l(ve)));S0(qe,Ce({get x(){return l(ve).internals.positionAbsolute.x},get y(){return l(ve).internals.positionAbsolute.y}},()=>l(fe),{get selected(){return l(ve).selected},get color(){return l(be)},get borderRadius(){return i()},get strokeColor(){return l(De)},get strokeWidth(){return s()},get shapeRendering(){return w},get class(){return l(ke)}}))};ye(Ne,qe=>{l(ve)&&la(l(ve))&&qe(Oe)})}K(ae,Pe)});var ue=ee($);j(U),Te(U,(ae,le)=>io==null?void 0:io(ae,le),()=>({store:l(f),panZoom:l(f).panZoom,getViewScale:M,translateExtent:l(f).translateExtent,width:l(f).width,height:l(f).height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:d(),zoomable:u()})),we(()=>{re(U,"width",a()),re(U,"height",c()),re(U,"viewBox",`${l(W)??""} ${l(S)??""} ${l(C)??""} ${l(v)??""}`),re(U,"aria-labelledby",l(O)),J=Ie(U,"",J,{"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*l(E):void 0}),re(ue,"d",`M${l(W)-l(R)},${l(S)-l(R)}h${l(C)+l(R)*2}v${l(v)+l(R)*2}h${-l(C)-l(R)*2}z
      M${l(b).x??""},${l(b).y??""}h${l(b).width??""}v${l(b).height??""}h${-l(b).width}z`)}),K(Q,U)};ye(G,Q=>{l(f).panZoom&&Q(Y)})}K(z,L)},$$slots:{default:!0}})),j(I),K(e,k),ie()}var A0=de("<div><!></div>");function ji(e,t){oe(t,!0);let n=B(t,"variant",19,()=>Rn.Handle),r=B(t,"minWidth",3,10),o=B(t,"minHeight",3,10),i=B(t,"maxWidth",19,()=>Number.MAX_VALUE),s=B(t,"maxHeight",19,()=>Number.MAX_VALUE),a=B(t,"keepAspectRatio",3,!1),c=B(t,"autoScale",3,!0),d=Ee(t,["$$slots","$$events","$$legacy","nodeId","position","variant","color","minWidth","minHeight","maxWidth","maxHeight","keepAspectRatio","autoScale","shouldResize","onResizeStart","onResize","onResizeEnd","class","children"]);const u=Ve();let h=x(()=>typeof t.nodeId=="string"?t.nodeId:Tt("svelteflow__node_id")),f,g=he(null),m=x(()=>n()===Rn.Line),_=x(()=>{let b=l(m)?"right":"bottom-right";return t.position??b}),p=x(()=>l(_).split("-"));Nl(()=>(f&&X(g,Wh({domNode:f,nodeId:l(h),getStoreItems:()=>({nodeLookup:u.nodeLookup,transform:[u.viewport.x,u.viewport.y,u.viewport.zoom],snapGrid:u.snapGrid??void 0,snapToGrid:!!u.snapGrid,nodeOrigin:u.nodeOrigin,paneDomNode:u.domNode}),onChange:(b,y)=>{const N=new Map;let T=b.x&&b.y?{x:b.x,y:b.y}:void 0;N.set(l(h),{...b,position:T});for(const E of y)N.set(E.id,{position:E.position});u.nodes=u.nodes.map(E=>{var V,R;const D=N.get(E.id);return D?{...E,position:{x:((V=D.position)==null?void 0:V.x)??E.position.x,y:((R=D.position)==null?void 0:R.y)??E.position.y},width:D.width??E.width,height:D.height??E.height}:E})}}),!0),()=>{var b;(b=l(g))==null||b.destroy()})),gs(()=>{var b;(b=l(g))==null||b.update({controlPosition:l(_),boundaries:{minWidth:r(),minHeight:o(),maxWidth:i(),maxHeight:s()},keepAspectRatio:!!a(),onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,shouldResize:t.shouldResize})});var w=A0();$e(w,(b,y)=>({class:b,...d,[Je]:{"border-color":l(m)?t.color:void 0,"background-color":l(m)?void 0:t.color,scale:y}}),[()=>["svelte-flow__resize-control",u.noDragClass,...l(p),n(),t.class],()=>l(m)||!c()?void 0:Math.max(1/u.viewport.zoom,1)]);var O=te(w);xe(O,()=>t.children??Me),j(w),Ht(w,b=>f=b,()=>f),K(e,w),ie()}var N0=de("<!> <!>",1);function z0(e,t){oe(t,!0);let n=B(t,"isVisible",3,!0),r=B(t,"autoScale",3,!0),o=Ee(t,["$$slots","$$events","$$legacy","isVisible","nodeId","handleClass","handleStyle","lineClass","lineStyle","autoScale"]);var i=me(),s=ce(i);{var a=c=>{var d=N0(),u=ce(d);Et(u,16,()=>Dh,f=>f,(f,g)=>{ji(f,Ce({get class(){return t.lineClass},get style(){return t.lineStyle},get nodeId(){return t.nodeId},get position(){return g},get autoScale(){return r()},get variant(){return Rn.Line}},()=>o))});var h=ee(u,2);Et(h,16,()=>Oh,f=>f,(f,g)=>{ji(f,Ce({get class(){return t.handleClass},get style(){return t.handleStyle},get nodeId(){return t.nodeId},get position(){return g},get autoScale(){return r()}},()=>o))}),K(c,d)};ye(s,c=>{n()&&c(a)})}K(e,i),ie()}function Ta(){const e=x(Ve),t=x(()=>l(e).connection);return{get current(){return l(t)}}}function Jo(){const e=x(Ve);return{get current(){return l(e).nodes},set current(t){l(e).nodes=t},update(t){l(e).nodes=t(l(e).nodes)},set(t){l(e).nodes=t}}}function T0(){const e=x(Ve);return{get current(){return l(e).edges},set current(t){l(e).edges=t},update(t){l(e).edges=t(l(e).edges)},set(t){l(e).edges=t}}}function $i(e){const t=x(Ve),n=x(()=>l(t).nodeLookup),r=x(()=>l(t).nodes),o=x(()=>(l(r),l(n).get(e)));return{get current(){return l(o)}}}const Ia=()=>Tt("dnd");function I0(e,t){oe(t,!0);let n=he(null);Gt("dnd",{set current(i){X(n,i,!0)},get current(){return l(n)}}),Wn(()=>{var i;(i=l(n))==null||i.set(null)});var r=me(),o=ce(r);xe(o,()=>t.children),K(e,r),ie()}function O0(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}const D0=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function kt(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Vt=null;function Oa(e={}){return Vt||(e.includeStyleProperties?(Vt=e.includeStyleProperties,Vt):(Vt=kt(window.getComputedStyle(document.documentElement)),Vt))}function Sr(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function R0(e){const t=Sr(e,"border-left-width"),n=Sr(e,"border-right-width");return e.clientWidth+t+n}function H0(e){const t=Sr(e,"border-top-width"),n=Sr(e,"border-bottom-width");return e.clientHeight+t+n}function Da(e,t={}){const n=t.width||R0(e),r=t.height||H0(e);return{width:n,height:r}}function L0(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Fe=16384;function V0(e){(e.width>Fe||e.height>Fe)&&(e.width>Fe&&e.height>Fe?e.width>e.height?(e.height*=Fe/e.width,e.width=Fe):(e.width*=Fe/e.height,e.height=Fe):e.width>Fe?(e.height*=Fe/e.width,e.width=Fe):(e.width*=Fe/e.height,e.height=Fe))}function Er(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function F0(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function B0(e,t,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(e),F0(o)}const Le=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Le(n,t)};function W0(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function X0(e,t){return Oa(t).map(n=>{const r=e.getPropertyValue(n),o=e.getPropertyPriority(n);return`${n}: ${r}${o?" !important":""};`}).join(" ")}function Y0(e,t,n,r){const o=`.${e}:${t}`,i=n.cssText?W0(n):X0(n,r);return document.createTextNode(`${o}{${i}}`)}function es(e,t,n,r){const o=window.getComputedStyle(e,n),i=o.getPropertyValue("content");if(i===""||i==="none")return;const s=D0();try{t.className=`${t.className} ${s}`}catch{return}const a=document.createElement("style");a.appendChild(Y0(s,n,o,r)),t.appendChild(a)}function K0(e,t,n){es(e,t,":before",n),es(e,t,":after",n)}const ts="application/font-woff",ns="image/jpeg",q0={woff:ts,woff2:ts,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ns,jpeg:ns,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Z0(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Qo(e){const t=Z0(e).toLowerCase();return q0[t]||""}function G0(e){return e.split(/,/)[1]}function Mo(e){return e.search(/^(data:)/)!==-1}function U0(e,t){return`data:${t};base64,${e}`}async function Ra(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise((i,s)=>{const a=new FileReader;a.onerror=s,a.onloadend=()=>{try{i(n({res:r,result:a.result}))}catch(c){s(c)}},a.readAsDataURL(o)})}const ao={};function J0(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function jo(e,t,n){const r=J0(e,t,n.includeQueryParams);if(ao[r]!=null)return ao[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const i=await Ra(e,n.fetchRequestInit,({res:s,result:a})=>(t||(t=s.headers.get("Content-Type")||""),G0(a)));o=U0(i,t)}catch(i){o=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;i&&(s=typeof i=="string"?i:i.message),s&&console.warn(s)}return ao[r]=o,o}async function Q0(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Er(t)}async function j0(e,t){if(e.currentSrc){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,s==null||s.drawImage(e,0,0,i.width,i.height);const a=i.toDataURL();return Er(a)}const n=e.poster,r=Qo(n),o=await jo(n,r,t);return Er(o)}async function $0(e,t){var n;try{if(!((n=e==null?void 0:e.contentDocument)===null||n===void 0)&&n.body)return await Fr(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function ev(e,t){return Le(e,HTMLCanvasElement)?Q0(e):Le(e,HTMLVideoElement)?j0(e,t):Le(e,HTMLIFrameElement)?$0(e,t):e.cloneNode(Ha(e))}const tv=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Ha=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function nv(e,t,n){var r,o;if(Ha(t))return t;let i=[];return tv(e)&&e.assignedNodes?i=kt(e.assignedNodes()):Le(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?i=kt(e.contentDocument.body.childNodes):i=kt(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),i.length===0||Le(e,HTMLVideoElement)||await i.reduce((s,a)=>s.then(()=>Fr(a,n)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function rv(e,t,n){const r=t.style;if(!r)return;const o=window.getComputedStyle(e);o.cssText?(r.cssText=o.cssText,r.transformOrigin=o.transformOrigin):Oa(n).forEach(i=>{let s=o.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Le(e,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),r.setProperty(i,s,o.getPropertyPriority(i))})}function ov(e,t){Le(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Le(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function iv(e,t){if(Le(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(o=>e.value===o.getAttribute("value"));r&&r.setAttribute("selected","")}}function sv(e,t,n){return Le(t,Element)&&(rv(e,t,n),K0(e,t,n),ov(e,t),iv(e,t)),t}async function av(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let i=0;i<n.length;i++){const a=n[i].getAttribute("xlink:href");if(a){const c=e.querySelector(a),d=document.querySelector(a);!c&&d&&!r[a]&&(r[a]=await Fr(d,t,!0))}}const o=Object.values(r);if(o.length){const i="http://www.w3.org/1999/xhtml",s=document.createElementNS(i,"svg");s.setAttribute("xmlns",i),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const a=document.createElementNS(i,"defs");s.appendChild(a);for(let c=0;c<o.length;c++)a.appendChild(o[c]);e.appendChild(s)}return e}async function Fr(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>ev(r,t)).then(r=>nv(e,r,t)).then(r=>sv(e,r,t)).then(r=>av(r,t))}const La=/url\((['"]?)([^'"]+?)\1\)/g,lv=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,cv=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function uv(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function dv(e){const t=[];return e.replace(La,(n,r,o)=>(t.push(o),n)),t.filter(n=>!Mo(n))}async function fv(e,t,n,r,o){try{const i=n?O0(t,n):t,s=Qo(t);let a;return o||(a=await jo(i,s,r)),e.replace(uv(t),`$1${a}$3`)}catch{}return e}function hv(e,{preferredFontFormat:t}){return t?e.replace(cv,n=>{for(;;){const[r,,o]=lv.exec(n)||[];if(!o)return"";if(o===t)return`src: ${r};`}}):e}function Va(e){return e.search(La)!==-1}async function Fa(e,t,n){if(!Va(e))return e;const r=hv(e,n);return dv(r).reduce((i,s)=>i.then(a=>fv(a,s,t,n)),Promise.resolve(r))}async function Ft(e,t,n){var r;const o=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(o){const i=await Fa(o,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function gv(e,t){await Ft("background",e,t)||await Ft("background-image",e,t),await Ft("mask",e,t)||await Ft("-webkit-mask",e,t)||await Ft("mask-image",e,t)||await Ft("-webkit-mask-image",e,t)}async function vv(e,t){const n=Le(e,HTMLImageElement);if(!(n&&!Mo(e.src))&&!(Le(e,SVGImageElement)&&!Mo(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,o=await jo(r,Qo(r),t);await new Promise((i,s)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...c)=>{try{i(t.onImageErrorHandler(...c))}catch(d){s(d)}}:s;const a=e;a.decode&&(a.decode=i),a.loading==="lazy"&&(a.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o})}async function mv(e,t){const r=kt(e.childNodes).map(o=>Ba(o,t));await Promise.all(r).then(()=>e)}async function Ba(e,t){Le(e,Element)&&(await gv(e,t),await vv(e,t),await mv(e,t))}function yv(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(o=>{n[o]=r[o]}),e}const rs={};async function os(e){let t=rs[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},rs[e]=t,t}async function is(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,e.url).href),Ra(a,t.fetchRequestInit,({result:c})=>(n=n.replace(s,`url(${c})`),[s,c]))});return Promise.all(i).then(()=>n)}function ss(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=o.exec(r);if(c===null)break;t.push(c[0])}r=r.replace(o,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");for(;;){let c=i.exec(r);if(c===null){if(c=a.exec(r),c===null)break;i.lastIndex=a.lastIndex}else a.lastIndex=i.lastIndex;t.push(c[0])}return t}async function wv(e,t){const n=[],r=[];return e.forEach(o=>{if("cssRules"in o)try{kt(o.cssRules||[]).forEach((i,s)=>{if(i.type===CSSRule.IMPORT_RULE){let a=s+1;const c=i.href,d=os(c).then(u=>is(u,t)).then(u=>ss(u).forEach(h=>{try{o.insertRule(h,h.startsWith("@import")?a+=1:o.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(d)}})}catch(i){const s=e.find(a=>a.href==null)||document.styleSheets[0];o.href!=null&&r.push(os(o.href).then(a=>is(a,t)).then(a=>ss(a).forEach(c=>{s.insertRule(c,s.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",i)}}),Promise.all(r).then(()=>(e.forEach(o=>{if("cssRules"in o)try{kt(o.cssRules||[]).forEach(i=>{n.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${o.href}`,i)}}),n))}function xv(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Va(t.style.getPropertyValue("src")))}async function bv(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=kt(e.ownerDocument.styleSheets),r=await wv(n,t);return xv(r)}function Wa(e){return e.trim().replace(/["']/g,"")}function pv(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(i=>{t.add(Wa(i))}),Array.from(r.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(e),t}async function _v(e,t){const n=await bv(e,t),r=pv(e);return(await Promise.all(n.filter(i=>r.has(Wa(i.style.fontFamily))).map(i=>{const s=i.parentStyleSheet?i.parentStyleSheet.href:null;return Fa(i.cssText,s,t)}))).join(`
`)}async function kv(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await _v(e,t);if(n){const r=document.createElement("style"),o=document.createTextNode(n);r.appendChild(o),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Sv(e,t={}){const{width:n,height:r}=Da(e,t),o=await Fr(e,t,!0);return await kv(o,t),await Ba(o,t),yv(o,t),await B0(o,n,r)}async function Ev(e,t={}){const{width:n,height:r}=Da(e,t),o=await Sv(e,t),i=await Er(o),s=document.createElement("canvas"),a=s.getContext("2d"),c=t.pixelRatio||L0(),d=t.canvasWidth||n,u=t.canvasHeight||r;return s.width=d*c,s.height=u*c,t.skipAutoScale||V0(s),s.style.width=`${d}`,s.style.height=`${u}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(i,0,0,s.width,s.height),s}async function Cv(e,t={}){return(await Ev(e,t)).toDataURL()}/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const Mv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Pv=Se("<svg><!><!></svg>");function st(e,t){oe(t,!0);const n=B(t,"color",3,"currentColor"),r=B(t,"size",3,24),o=B(t,"strokeWidth",3,2),i=B(t,"absoluteStrokeWidth",3,!1),s=B(t,"iconNode",19,()=>[]),a=Ee(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var c=Pv();$e(c,h=>({...Mv,...a,width:r(),height:r(),stroke:n(),"stroke-width":h,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>i()?Number(o())*24/Number(r()):o()]);var d=te(c);Et(d,17,s,ws,(h,f)=>{var g=x(()=>Rt(l(f),2));let m=()=>l(g)[0],_=()=>l(g)[1];var p=me(),w=ce(p);Xl(w,m,!0,(O,b)=>{$e(O,()=>({..._()}))}),K(h,p)});var u=ee(d);xe(u,()=>t.children??Me),j(c),K(e,c),ie()}function Av(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 5v14"}],["path",{d:"M21 12H7"}],["path",{d:"m15 18 6-6-6-6"}]];st(e,Ce({name:"arrow-right-from-line"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Nv(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m16 22-1-4"}],["path",{d:"M19 13.99a1 1 0 0 0 1-1V12a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v.99a1 1 0 0 0 1 1"}],["path",{d:"M5 14h14l1.973 6.767A1 1 0 0 1 20 22H4a1 1 0 0 1-.973-1.233z"}],["path",{d:"m8 22 1-4"}]];st(e,Ce({name:"brush-cleaning"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Xa(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12.1",cy:"12.1",r:"1"}]];st(e,Ce({name:"dot"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function zv(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"}],["path",{d:"m14 19 3 3v-5.5"}],["path",{d:"m17 22 3-3"}],["circle",{cx:"9",cy:"9",r:"2"}]];st(e,Ce({name:"image-down"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Tv(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 3v12"}],["path",{d:"m8 11 4 4 4-4"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4"}]];st(e,Ce({name:"import"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Ya(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 8L22 12L18 16"}],["path",{d:"M2 12H22"}]];st(e,Ce({name:"move-right"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function $o(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 2v20"}],["path",{d:"m15 19-3 3-3-3"}],["path",{d:"m19 9 3 3-3 3"}],["path",{d:"M2 12h20"}],["path",{d:"m5 9-3 3 3 3"}],["path",{d:"m9 5 3-3 3 3"}]];st(e,Ce({name:"move"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Iv(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];st(e,Ce({name:"rotate-ccw"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Ov(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];st(e,Ce({name:"save"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Ka(e,t){oe(t,!0);let n=Ee(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];st(e,Ce({name:"x"},()=>n,{get iconNode(){return r},children:(o,i)=>{var s=me(),a=ce(s);xe(a,()=>t.children??Me),K(o,s)},$$slots:{default:!0}})),ie()}function Dv(e,t,n,r,o,i){const s=t.getNodesBounds(n.current),a=Lr(s,r,o,.5,2,.2),c=document.querySelector(".svelte-flow__viewport");a&&Cv(c,{backgroundColor:"white",width:r,height:o,style:{width:`${r}px`,height:`${o}px`,transform:`translate(${a.x}px, ${a.y}px) scale(${a.zoom})`}}).then(d=>{const u=document.createElement("a");u.download=i!=""?`${i}.png`:"structure-chart.png",u.href=d,u.click()})}async function Rv(e,t){let n=localStorage.getItem("charts");if(n){const r=await JSON.parse(n);X(t,r,!0)}else X(t,{},!0)}async function Hv(e,t,n,r){let o=localStorage.getItem("charts");if(o){let i=await JSON.parse(o);i[l(r)]={nodes:t.current,edges:n.current},localStorage.setItem("charts",JSON.stringify(i))}else{const i={save_name:{nodes:t.current,edges:n.current}};localStorage.setItem("charts",JSON.stringify(i))}}var Lv=()=>document.getElementById("file_input").click(),Vv=async(e,t,n,r)=>{let o=localStorage.getItem("charts");if(o){const i=await JSON.parse(o);t.set(i[l(n)].nodes),r.set(i[l(n)].edges)}},Fv=de("<option> </option>"),Bv=(e,t,n)=>{t.set([]),n.set([])},Wv=de('<aside class="svelte-wfee1c"><div class="nodes-container svelte-wfee1c"><div style="display: flex;align-items: center;">drag a component  to the panel <div class="input-node node svelte-wfee1c">func</div> <div style="display: flex; margin-left:10px;"><!> <div style="margin-left: -12px;;"><!></div></div> <div class="oval svelte-wfee1c" style="margin-left: 20px;"></div> <div class="rhombus svelte-wfee1c" style="margin-left: 20px;"></div></div> <div style="display: flex; align-items: center;"><label for="file_name" style="font-size: large;">png</label> <button style="border: none; background-color:transparent; cursor: pointer;"><!></button> <label for="file_name" style="font-size: large; margin-left:10px;">export</label> <button style="border: none; background-color:transparent; cursor: pointer;"><!></button> <label for="file_name" style="font-size: large; margin-left:10px;">import</label> <input type="file" id="file_input" style="display: none;" accept=".json"/> <button style="border: none; background-color:transparent; cursor: pointer;"><!></button> <label for="save" style="font-size: large; margin-left:10px;">save</label> <input id="save" style="margin-left: 10px; width: 70px;"/> <button style="border: none; background-color:transparent; cursor: pointer;"><!></button> <label for="load" style="font-size: large; margin-left:10px;">load</label> <select style="border: none;"><option>--choose a chart--</option><!></select> <button style="border: none; background-color:transparent; cursor: pointer;"><!></button></div></div></aside>');function Xv(e,t){oe(t,!0);const n=Ia(),r=Jo(),o=T0(),i=rn(),s=1024,a=768;let c="",d=he(""),u=he(Pt({})),h=he(""),f=he(void 0);function g(){const Z=JSON.stringify({nodes:r.current,edges:o.current});var $=document.createElement("a");$.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(Z)),$.setAttribute("download","structure-chart.json"),$.style.display="none",document.body.appendChild($),$.click(),document.body.removeChild($)}let m;async function _(Z){const $=Z.target.files[0];if($==null){m=null;return}m=await p($),r.set(m.nodes),o.set(m.edges)}function p(Z){const $=new FileReader;return new Promise((ue,ae)=>{$.onload=()=>ue(JSON.parse($.result)),$.onerror=ae,$.readAsText(Z)})}const w=(Z,$)=>{if(!Z.dataTransfer)return null;n.current=$,Z.dataTransfer.effectAllowed="move"};var O=Wv(),b=te(O),y=te(b),N=ee(te(y));re(N,"draggable",!0);var T=ee(N,2);re(T,"draggable",!0);var E=te(T);Xa(E,{strokeWidth:1});var D=ee(E,2),V=te(D);Ya(V,{strokeWidth:1}),j(D),j(T);var R=ee(T,2);re(R,"draggable",!0);var W=ee(R,2);re(W,"draggable",!0),j(y);var S=ee(y,2),C=ee(te(S),2);C.__click=[Dv,i,r,s,a,c];var v=te(C);zv(v,{strokeWidth:1}),j(C);var M=ee(C,4);M.__click=g;var k=te(M);Av(k,{strokeWidth:1}),j(M);var I=ee(M,4);ho(I),I.__change=_;var H=ee(I,2);H.__click=[Lv];var z=te(H);Tv(z,{strokeWidth:1}),j(H);var F=ee(H,4);ho(F);var L=ee(F,2);L.__click=[Hv,r,o,d];var G=te(L);Ov(G,{strokeWidth:1}),j(L);var Y=ee(L,4);Y.__change=[Vv,r,h,o],Y.__click=[Rv,u];var Q=te(Y);Q.value=Q.__value="";var U=ee(Q);Et(U,17,()=>Object.entries(l(u)),ws,(Z,$)=>{var ue=x(()=>Rt(l($),2));let ae=()=>l(ue)[0];var le=Fv(),Pe={},ve=te(le,!0);j(le),we(()=>{Pe!==(Pe=ae())&&(le.value=(le.__value=ae())??""),dt(ve,ae())}),K(Z,le)}),j(Y);var J=ee(Y,2);J.__click=[Bv,r,o];var ne=te(J);Nv(ne,{strokeWidth:1}),j(J),j(S),j(b),j(O),Bt("dragstart",N,Z=>w(Z,"custom")),Bt("dragstart",T,Z=>w(Z,"var")),Bt("dragstart",R,Z=>w(Z,"while")),Bt("dragstart",W,Z=>w(Z,"if")),fi(I,()=>l(f),Z=>X(f,Z)),fi(F,()=>l(d),Z=>X(d,Z)),Gl(Y,()=>l(h),Z=>X(h,Z)),K(e,O),ie()}nn(["click","change"]);var Yv=(e,t,n)=>{t.update(r=>r.filter(o=>o.id!==n.id))},Kv=(e,t,n)=>{t(n.id,{text:e.target.value})},qv=de("<!> <!> <!> <!>",1),Zv=de(`<div class="text-updater-node svelte-1mkpzx6"><div style="position:absolute; top:-20px; right: 0px;"><button style="border: none; background-color:transparent; z-index: 20; cursor:pointer;"><!></button> <button style="border: none; background-color:transparent; z-index: 20; cursor:pointer;"><!></button></div> <div><input style="
      width:100%;
      text-align: center;
      border: none;
      background-color: transparent;
      outline: none;
      resize: none;
      font-size:large;
      padding:20px 0px;
      " placeholder="func" class="nodrag"/></div> <!> <!></div>`);function Gv(e,t){oe(t,!0);let{updateNodeData:n}=rn();const r=Ta(),o=Jo();var i=Zv(),s=te(i),a=te(s),c=te(a);$o(c,{strokeWidth:1,size:14}),j(a);var d=ee(a,2);d.__click=[Yv,o,t];var u=te(d);Ka(u,{strokeWidth:1,size:14}),j(d),j(s);var h=ee(s,2),f=te(h);ho(f),f.__input=[Kv,n,t],j(h);var g=ee(h,2);{var m=p=>{var w=qv(),O=ce(w);je(O,{style:`
    width: 100%;
    height: 20%;
    background: blu;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    transform: none;
    border: none;
    opacity: 0;
    z-index: 1;
    `,id:"top",get position(){return se.Top},type:"source"});var b=ee(O,2);je(b,{style:`
    width: 10%;
    height: 100%;
    background: blu;
    position: absolute;
    top: 0;
    right: 0;
    border-radius: 0;
    transform: none;
    border: none;
    opacity: 0;
    z-index: 1;
    `,id:"right",get position(){return se.Right},type:"source"});var y=ee(b,2);je(y,{style:`
    width: 10%;
    height: 100%;
    background: blu;
    position: absolute;
    top: 0;
    right: 0;
    border-radius: 0;
    transform: none;
    border: none;
    opacity: 0;
    z-index: 1;
    `,id:"left",get position(){return se.Left},type:"source"});var N=ee(y,2);je(N,{style:`
    width: 100%;
    height: 20%;
    background: blu;
    position: absolute;
    bottom: 0;
    left: 0;
    border-radius: 0;
    transform: none;
    border: none;
    opacity: 0;
    z-index: 1;
    `,id:"bottom",get position(){return se.Bottom},type:"source"}),K(p,w)};ye(g,p=>{r.current.inProgress||p(m)})}var _=ee(g,2);je(_,{style:`
  width: 100%;
  height: 100%;
  background: transparent;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 0;
  transform: none;
  border: none;
  opacity: 0;
  `,get position(){return se.Left},type:"target",isConnectableStart:!1}),j(i),we(()=>Ul(f,t.data.text)),K(e,i),ie()}nn(["click","input"]);var Uv=de('<!> <div class="oval svelte-91pdpi"></div>',1);function Jv(e,t){oe(t,!0);let{updateNodeData:n}=rn();var r=Uv(),o=ce(r);z0(o,{minWidth:100,minHeight:30,get isVisible(){return t.selected},color:"rgb(255, 64, 0)"}),tn(2),K(e,r),ie()}function as(e,t){const n=e.internals.positionAbsolute||{x:0,y:0},r=t.internals.positionAbsolute||{x:0,y:0},o=(e.measured.width??0)/2,i=(e.measured.height??0)/2,s=n.x+o,a=n.y+i,c=r.x+(t.measured.width??0)/2,d=r.y+(t.measured.height??0)/2,u=(c-s)/(2*o)-(d-a)/(2*i),h=(c-s)/(2*o)+(d-a)/(2*i),f=1/(Math.abs(u)+Math.abs(h)),g=f*u,m=f*h,_=o*(g+m)+s,p=i*(-g+m)+a;return{x:_,y:p}}function ls(e,t){var s,a;if(!e.measured.width||!e.measured.height)return null;const n=Math.round(((s=e.internals.positionAbsolute)==null?void 0:s.x)??0),r=Math.round(((a=e.internals.positionAbsolute)==null?void 0:a.y)??0),o=Math.round(t.x),i=Math.round(t.y);return o<=n+1?se.Left:o>=n+e.measured.width-1?se.Right:i<=r+1?se.Top:i>=r+e.measured.height-1?se.Bottom:se.Top}function Qv(e,t){const n=as(e,t),r=as(t,e),o=ls(e,n),i=ls(t,r);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:o,targetPos:i}}function jv(e,t){oe(t,!0);const n=$i(t.source),r=$i(t.target);let o=x(()=>{if(n.current&&r.current){const i=Qv(n.current,r.current);return Yo({sourceX:i.sx,sourceY:i.sy,targetX:i.tx,targetY:i.ty})[0]}});Gn(e,{get id(){return t.id},get path(){return l(o)},get markerEnd(){return t.markerEnd},style:"stroke-width: 1px; stroke: grey"}),ie()}var $v=de('<div class="rhombus svelte-1rqhyii"><!> <!></div> <div style="position: relative; top: -31px; left: 30%; height: 0px;"><!></div>',1);function em(e,t){oe(t,!0);const n=Ta();var r=$v(),o=ce(r),i=te(o);{var s=u=>{je(u,{style:`
  width: 100%;
  height: 100%;
  background: blue;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 0;
  transform: none;
  border: none;
  opacity: 0;
  z-index: 1;
  `,get position(){return se.Right},type:"source"})};ye(i,u=>{n.current.inProgress||u(s)})}var a=ee(i,2);je(a,{style:`
  width: 100%;
  height: 100%;
  background: blue;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 0;
  transform: none;
  border: none;
  opacity: 0;
  `,get position(){return se.Left},type:"target",isConnectableStart:!1}),j(o);var c=ee(o,2),d=te(c);$o(d,{size:12,color:"white"}),j(c),K(e,r),ie()}var tm=(e,t)=>{t.update(n=>n.filter(r=>r.id!==id))},nm=(e,t)=>{l(t)==.5?X(t,2):X(t,.5)},rm=de(`<div><div><div><div><button style="border: none; background-color: transparent; cursor:pointer"><!></button> <button class="nodrag"><!></button> <button><!></button></div> <input style="
        border: none;
        background-color: transparent;
        border-width: thin;
        outline: none;
        width:70px;
        margin-bottm: -10px;
        font-weight:lighter;
        text-align:center;
        "/></div> <div style="display: flex;"><div><div class="nodrag"><button style="border: none; background-color: transparent; cursor:pointer; display:flex;"><!> <div style="margin-left: -19px;"><!></div></button></div></div></div></div></div>`);function om(e,t){oe(t,!0);let{updateNodeData:n}=rn();const r=Jo();let o=he(0),i=he(!1),s=he(.5),a=he(0),c=he(0),d;function u(k){X(i,!0),X(a,k.clientX,!0),X(c,l(o),!0),d&&(d.style.cursor="grabbing")}function h(k){if(!l(i))return;const I=k.clientX-l(a);X(o,l(c)+I*.5)}function f(){X(i,!1),d&&(d.style.cursor="grab")}St(()=>(document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f)}));var g=rm(),m=te(g);let _;var p=te(m);let w;var O=te(p),b=te(O),y=te(b);$o(y,{strokeWidth:1,size:8}),j(b);var N=ee(b,2);Ie(N,"border: none; background-color: transparent;",{},{cursor:"pointer"}),N.__mousedown=u;var T=te(N);Iv(T,{strokeWidth:1,size:8}),j(N),Ht(N,k=>d=k,()=>d);var E=ee(N,2);Ie(E,"border: none; background-color: transparent;",{},{cursor:"pointer"}),E.__click=[tm,r];var D=te(E);Ka(D,{strokeWidth:1,size:8}),j(E),j(O),tn(2),j(p);var V=ee(p,2),R=te(V),W=te(R),S=te(W);S.__click=[nm,s];var C=te(S);Xa(C,{get strokeWidth(){return l(s)},size:38});var v=ee(C,2),M=te(v);Ya(M,{strokeWidth:.5,size:38}),j(v),j(S),j(W),j(R),j(V),j(m),j(g),we(()=>{_=Ie(m,"display: flex; flex-direction: column;",_,{transform:`rotate(${l(o)}deg)`}),w=Ie(p,"display: flex; flex-direction: column; text-align:center",w,{transform:`rotate(${-l(o)}deg)`})}),K(e,g),ie()}nn(["mousedown","click"]);var im=de("<!> <!> <!>",1),sm=de('<main class="svelte-1qde0dg"><!> <!></main>');function am(e,t){oe(t,!0);let n=he([]),r=he([]);const{screenToFlowPosition:o}=rn(),i=Ia(),s=m=>{m.preventDefault(),m.dataTransfer&&(m.dataTransfer.dropEffect="move")},a=m=>{if(m.preventDefault(),!i.current)return;const _=o({x:m.clientX,y:m.clientY}),p={id:`${Math.random()}`,type:i.current,position:_,data:{label:`${i.current} node`},origin:[.5,0]};X(n,[...l(n),p])},c={custom:Gv,while:Jv,if:em,var:om},d={"custom-edge":jv},u={type:"custom-edge",markerEnd:{type:In.ArrowClosed}};var h=sm(),f=te(h);e0(f,{get nodeTypes(){return c},get edgeTypes(){return d},get defaultEdgeOptions(){return u},fitView:!0,ondragover:s,get connectionLineType(){return lt.Straight},ondrop:a,get nodes(){return l(n)},set nodes(m){X(n,m)},get edges(){return l(r)},set edges(m){X(r,m)},children:(m,_)=>{var p=im(),w=ce(p);v0(w,{});var O=ee(w,2);_0(O,{get variant(){return ht.Dots}});var b=ee(O,2);P0(b,{}),K(m,p)},$$slots:{default:!0}});var g=ee(f,2);Xv(g,{}),j(h),K(e,h),ie()}function ym(e){t0(e,{children:(t,n)=>{I0(t,{children:(r,o)=>{am(r,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}export{ym as component};
